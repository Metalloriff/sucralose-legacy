{"version":3,"sources":["Components/Modals.js","Classes/Constants.js","Classes/TimerClass.js","Components/Toasts.js","Components/ErrorBoundary.js","Components/Dropdown.js","Constants.js","Icons/Chevron.svg","Components/ContextMenuHandler.js","Icons/Spinner.svg","Components/InlineLoading.js","Components/PostModal.js","Components/LinkWrapper.js","Icons/Search.svg","Components/SearchBar.js","Components/PostTagsList.js","Components/Post.js","Components/PostList.js","Components/TabsList.js","Components/PostCommentList.js","Pages/Post.js","Pages/Settings.js","Pages/Sets.js","Pages/User.js","Icons/Sidebar.svg","EventListener.js","App.js","serviceWorker.js","index.js"],"names":["openModal","closeModal","copyToClipboard","openStringModal","onCloseEvents","Modals","state","active","locked","modals","closing","modal","a","Promise","r","setImmediate","id","push","setState","length","pop","setTimeout","event","text","window","navigator","clipboard","writeText","Toasts","showToast","substr","e","title","description","value","url","getSources","ImageModal","ref","React","useRef","sources","Arrows","img","useState","index","setIndex","useEffect","current","indexOf","src","nav","dir","preventDefault","stopPropagation","className","onClick","icon","faChevronLeft","faChevronRight","alt","options","yesText","noText","yesColor","noColor","resolve","dangerouslySetInnerHTML","__html","style","backgroundColor","response","onChange","Math","random","toString","defaultValue","document","getElementById","this","target","currentTarget","classList","contains","props","onBackdropClick","map","includes","zIndex","Component","joinClassNames","final","i","arguments","Array","isArray","trim","getRandomKey","Object","exclude","object","output","assign","exclusions","exclusion","Timer","callback","duration","playAutomatically","remainingTime","resume","startTime","Date","now","clearTimeout","Toast","children","type","life","remove","color","fixedTime","handleRemove","setClosing","timer","useMemo","progressBar","handleMouseEnter","pause","animationPlayState","handleMouseLeave","handleFocus","handleBlur","addEventListener","hasFocus","removeEventListener","onMouseEnter","onMouseLeave","end","cursor","animationDuration","toasts","instance","horizontalStyle","verticalStyle","additionalOptions","toast","createElement","key","filter","t","createRef","ErrorBoundary","error","errorInfo","moreInfo","message","componentStack","split","slice","msg","showErrorInfo","renderError","open","items","find","item","label","placeholder","obj","path","p","k","_fetch","fetch","lastDidApi","performance","call","API","login","localStorage","getItem","api_key","endpoint","sub","args","explicitSub","_client","query","fetchLocalUserId","res","html","dom","DOMParser","parseFromString","getElementsByClassName","profileButton","getElementsByTagName","innerText","pathname","startsWith","console","formatCamelCase","camelCase","replace","charAt","toUpperCase","Serializer","fallback","isObject","string","JSON","parse","data","setItem","stringify","Order","Default","Random","Score","FavCount","TagCount","Resolution","FileSize","getPageArgs","location","hash","decodeURIComponent","bytesToString","bytes","floor","log","parseFloat","pow","toFixed","download","uri","encodeURIComponent","then","blob","display","href","URL","createObjectURL","body","appendChild","click","revokeObjectURL","catch","err","Query","convert","ret","set","q","newHref","history","pushState","get","getSiteBase","hostname","origin","ContextMenu","docClickEv","close","activeWrapper","menu","Handler","Wrapper","handleContextMenu","top","overrideY","clientY","left","overrideX","clientX","innerWidth","ReactDOM","createPortal","publicProps","position","prevProps","prevState","snapshot","rect","getBoundingClientRect","transform","y","height","innerHeight","wrapperClassName","openOnClick","onContextMenu","Item","handleClick","autoClose","SubMenuItem","x","width","right","ChevronIcon","mount","ToggleItem","checked","Divider","InlineLoading","PostModalContextMenu","upvotes","downvotes","selfScore","favorited","is_favorited","vote","Post","favorite","score","up","down","fav_count","PostModal","loaded","post","back","events","subscribe","priority","unsubscribe","Image","file","offset","PostList","posts","findIndex","getOffsetPost","previewUrl","fileUrl","el","ext","backgroundImage","controls","Chevron","SearchBar","searching","acResults","acUpdateInstance","search","textContent","handleAutoCompleteUpdate","warn","words","commit","limit","json","tag","searchBar","content","join","focus","execCommand","getSelection","collapseToEnd","focused","parentElement","autoComplete","add","opacity","contentEditable","onKeyDown","handleKeyDown","onFocus","handleFocusChange","onBlur","onInput","handleInput","Spinner","Search","previousSibling","name","post_count","handleAutoCompleteSelect","PostTagContextMenu","App","settings","subscriptions","splice","blacklist","saveSettings","forceUpdate","searchContains","tags","keys","category","c","PostContextMenu","toggle","post_ids","method","postSets","s","faImage","faDownload","faClipboard","faExternalLinkAlt","loggedIn","faLayerGroup","handleSet","faPlus","faCog","loading","sample","bind","onLoad","artist","faCaretSquareUp","faCaretSquareDown","faHeart","voting","favoriting","post_id","promptLogin","no_unvote","our_score","minHeight","lastTags","currentPage","switchingPages","order","docScrollEv","bottom","loadPage","componentDidUpdate","openPostModalForId","page","parseInt","bar","endpointArgs","getTags","to","append","lastValidPage","cache","tabs","Children","toArray","tab","comments","interval","setInterval","refresh","doc","com","avatar","attributes","nodeValue","user","username","innerHTML","timestamp","clearInterval","comment","preview_url","InfoItem","ready","componentDidMount","source","contentView","commentLabel","comment_count","link","md5","created_at","toLocaleDateString","toLocaleTimeString","size","values","flags","f","rating","flexDirection","textTransform","formatSource","uploader_id","List","localUserId","addFieldRef","note","faTimes","Settings","textAlign","fontSize","cat","entries","setting","SettingField","val","save","importSettings","exportSettings","serializable","defaults","_","SettingsRenderer","setValueState","newVal","min","max","useReducer","colors","primary","secondary","backgroundColors","tertiary","borderRadius","columnCount","mobileColumnCount","merge","SetsPage","Field","multiline","owner","importantNote","CreatePage","shortname","public","transferOnDelete","errors","SetItemContextMenu","creator_id","updated_at","toDateString","MainPage","mySets","subscribedSets","initSets","initMySets","sets","exec","initSubscribedSets","favCount","postCount","about","parseAvatar","parseAboutInfo","firstElementChild","dataset","section","favorites","user_id","EventListener","listeners","eventName","sort","b","getOptionsFor","every","Sidebar","buttonRef","SidebarButton","faHistory","faChartLine","faBell","faUser","isMobile","useMediaQuery","apiKey","tryLogin","showNotice","success","reload","input","accept","files","Response","clear","Blob","removeChild","init","Page","HomePage","SearchPage","FavoritesPage","SidebarIcon","getFullYear","onpopstate","invoke","lastHash","Boolean","match","render","StrictMode","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.98a6e715.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Modals.scss\";\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport Toasts from \"./Toasts\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faChevronLeft, faChevronRight } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nlet openModal;\r\nlet closeModal;\r\nlet copyToClipboard;\r\nlet openImageModal;\r\nlet openBoolModal;\r\nlet openStringModal;\r\n\r\nlet onCloseEvents = [];\r\n\r\nclass Modals extends React.Component {\r\n\tstate = { active: false, locked: false, modals: [], closing: [] };\r\n\r\n\tcomponentDidMount() {\r\n\t\topenModal = async modal => {\r\n\t\t\twhile (this.state.locked)\r\n\t\t\t\tawait new Promise(r => setImmediate(r));\r\n\t\t\tawait new Promise(r => setImmediate(r)); // javascript is shit\r\n\t\t\t\r\n\t\t\tconst modals = this.state.modals;\r\n\t\t\tconst id = modals.push(modal);\r\n\t\t\tthis.setState({ modals, active: true });\r\n\t\t\t\r\n\t\t\treturn id;\r\n\t\t};\r\n\r\n\t\tcloseModal = () => {\r\n\t\t\tif (this.state.modals.length > 0) {\r\n\t\t\t\tconst modals = [...this.state.modals];\r\n\t\t\t\tconst modal = this.state.modals[modals.length - 1];\r\n\t\t\t\tconst closing = [...this.state.closing];\r\n\r\n\t\t\t\tmodals.pop(modal);\r\n\t\t\t\tclosing.push(modal);\r\n\t\r\n\t\t\t\tif (this.state.active) {\r\n\t\t\t\t\tthis.setState({ active: modals.length > 0, locked: true, closing });\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.state.closing.pop(modal);\r\n\t\t\t\t\t\tthis.setState({ modals, locked: false });\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (let event of onCloseEvents) {\r\n\t\t\t\t\tevent();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tonCloseEvents = [];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tcopyToClipboard = text => {\r\n\t\t\ttry {\r\n\t\t\t\twindow.navigator.clipboard.writeText(text);\r\n\r\n\t\t\t\tToasts.showToast(<span><b>{text.length >= 100 ? text.substr(0, 100) + \"...\" : text}</b> copied to clipboard</span>, \"Success\");\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\topenStringModal({\r\n\t\t\t\t\ttitle: \"Failed To Copy\",\r\n\t\t\t\t\tdescription: \"Your browser does not support copying to clipboard, you can manually copy here.\",\r\n\t\t\t\t\tvalue: text\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\topenImageModal = (url, getSources) => {\r\n\t\t\tconst ImageModal = () => {\r\n\t\t\t\tconst ref = React.useRef();\r\n\t\t\t\tconst sources = typeof(getSources) === \"function\" ? getSources() : null;\r\n\t\t\t\t\r\n\t\t\t\tconst Arrows = ({ img }) => {\r\n\t\t\t\t\tconst [index, setIndex] = React.useState(-1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tReact.useEffect(() => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (img.current) {\r\n\t\t\t\t\t\t\t\tsetIndex(sources.indexOf(img.current.src));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst nav = (e, dir) => {\r\n\t\t\t\t\t\timg.current.src = sources[index + dir];\r\n\t\t\t\t\t\tsetIndex(index + dir);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn index === -1 ? null : (\r\n\t\t\t\t\t\t<div className=\"ArrowsContainer\">\r\n\t\t\t\t\t\t\t{ index > 0 ? (\r\n\t\t\t\t\t\t\t\t<div className=\"Arrow Left\" onClick={e => nav(e, -1)}>\r\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon className=\"Icon\" icon={faChevronLeft}/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null }\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{ index < sources.length - 1 ? (\r\n\t\t\t\t\t\t\t\t<div className=\"Arrow Right\" onClick={e => nav(e, 1)}>\r\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon className=\"Icon\" icon={faChevronRight}/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"ImageModal\" onClick={() => closeModal()}>\r\n\t\t\t\t\t\t<img ref={ref} src={url} alt=\"Image failed to load.\"/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{ sources?.length ? <Arrows img={ref}/> : null }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\topenModal(<ImageModal/>);\r\n\t\t}\r\n\t\t\r\n\t\topenBoolModal = async options => {\r\n\t\t\tconst { title = \"\", description = \"\", yesText = \"Yes\", noText = \"No\", yesColor = \"#ff6666\", noColor = \"\" } = options;\r\n\t\t\t\r\n\t\t\tconst response = await new Promise(resolve => {\r\n\t\t\t\topenModal(\r\n\t\t\t\t\t<div className=\"BoolModal PrimaryBg\">\r\n\t\t\t\t\t\t<div className=\"Title\" dangerouslySetInnerHTML={{ __html: title }}/>\r\n\t\t\t\t\t\t<div className=\"Description\" dangerouslySetInnerHTML={{ __html: description }}/>\r\n\r\n\t\t\t\t\t\t<div className=\"Footer\">\r\n\t\t\t\t\t\t\t<div className=\"Button TertiaryBg\" onClick={() => resolve(false)} style={{ backgroundColor: noColor }}>{noText}</div>\r\n\t\t\t\t\t\t\t<div className=\"Button TertiaryBg\" onClick={() => resolve(true)} style={{ backgroundColor: yesColor }}>{yesText}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tcloseModal();\r\n\t\t\t\r\n\t\t\treturn response;\r\n\t\t};\r\n\t\t\r\n\t\topenStringModal = async options => {\r\n\t\t\tconst { title = \"\", description = \"\", yesText = \"Confirm\", noText = \"Cancel\", yesColor = \"\", noColor = \"\", value = \"\", onChange = null } = options;\r\n\t\t\tconst id = Math.random().toString(36).substr(7);\r\n\r\n\t\t\tconst response = await new Promise(resolve => {\r\n\t\t\t\topenModal(\r\n\t\t\t\t\t<div className=\"StringModal PrimaryBg\">\r\n\t\t\t\t\t\t<div className=\"Title\" dangerouslySetInnerHTML={{ __html: title }}/>\r\n\t\t\t\t\t\t<div className=\"Description\" dangerouslySetInnerHTML={{ __html: description }}/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<input id={id} className=\"Field TertiaryBg\" defaultValue={value} onChange={onChange}/>\r\n\r\n\t\t\t\t\t\t<div className=\"Footer\">\r\n\t\t\t\t\t\t\t<div className=\"Button TertiaryBg\" onClick={() => resolve(\"\")} style={{ backgroundColor: noColor }}>{noText}</div>\r\n\t\t\t\t\t\t\t<div className=\"Button TertiaryBg\" onClick={() => resolve(document.getElementById(id).value)} style={{ backgroundColor: yesColor }}>{yesText}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\tcloseModal();\r\n\r\n\t\t\treturn response;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<div className={\"ModalContainer\" + (this.state.active ? \" Active\" : \"\")}\r\n\t\t\t\t\t onClick={e => {if (e.target === e.currentTarget || e.target.classList.contains(\"Modal\")) (this.state.modals[this.state.modals.length - 1].props?.onBackdropClick ?? closeModal)()}}>\r\n\t\t\t\t\t{ this.state.modals.map(modal => (\r\n\t\t\t\t\t\t<div key={this.state.modals.indexOf(modal)} className={\"Modal\" + (this.state.closing.includes(modal) ||\r\n\t\t\t\t\t\t(this.state.modals.indexOf(modal) < (this.state.modals.length - 1) && this.state.closing.length === 0) ? \" Closing\" : \"\")}\r\n\t\t\t\t\t\t\t style={{ zIndex: this.state.modals.indexOf(modal) * 10 }}>\r\n\t\t\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t\t\t{ modal }\r\n\t\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)) }\r\n\t\t\t\t</div>\r\n\t\t\t</ErrorBoundary>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { Modals, openModal, closeModal, copyToClipboard, openImageModal, openBoolModal, openStringModal };","export function joinClassNames() {\r\n    let final = \"\";\r\n\r\n    for (let i = 0; i < arguments.length; i++) {\r\n        switch (typeof(arguments[i])) {\r\n            case (Array.isArray(arguments[i]) && typeof(arguments[i][0]) === \"boolean\" && \"object\"):\r\n                if (arguments[i][0] === true)\r\n                    final += arguments[i][1];\r\n                else if (arguments[i][2])\r\n                    final += arguments[i][2];\r\n                break;\r\n\r\n            default:\r\n                final += arguments[i];\r\n                break;\r\n        }\r\n\r\n        final += \" \";\r\n    }\r\n\r\n    return final.trim();\r\n}\r\n\r\nObject.exclude = function exclude(object, ...exclusions) {\r\n    const output = Object.assign({}, object);\r\n\r\n    for (const exclusion of exclusions) delete output[exclusion];\r\n    return output;\r\n}\r\n\r\nexport function getRandomKey() { return Math.random().toString(36).substr(7); }","export default class Timer {\r\n    id;\r\n    startTime;\r\n    remainingTime;\r\n    callback;\r\n    duration;\r\n    \r\n    constructor(callback, duration, playAutomatically = true) {\r\n        this.callback = callback;\r\n        this.duration = duration;\r\n        this.remainingTime = duration;\r\n        \r\n        if (playAutomatically)\r\n            this.resume();\r\n    }\r\n    \r\n    resume() {\r\n        this.startTime = Date.now();\r\n        \r\n        clearTimeout(this.id);\r\n        this.id = setTimeout(this.callback, this.remainingTime);\r\n    }\r\n    \r\n    pause() {\r\n        clearTimeout(this.id);\r\n        this.remainingTime -= Date.now() - this.startTime;\r\n    }\r\n    \r\n    end() {\r\n        clearTimeout(this.id);\r\n        this.callback();\r\n    }\r\n}","import React from \"react\";\r\nimport \"./Toasts.scss\";\r\nimport { getRandomKey, joinClassNames } from \"../Classes/Constants\";\r\nimport Timer from \"../Classes/TimerClass\";\r\n\r\nexport function Toast({ children, type, life, remove, callback, color, fixedTime = false }) {\r\n\tconst handleRemove = () => {\r\n\t\tsetClosing(true);\r\n\r\n\t\tsetTimeout(remove, 500);\r\n\t};\r\n\t\r\n\tconst [closing, setClosing] = React.useState(false);\r\n\tconst timer = React.useMemo(() => new Timer(handleRemove, life * 1000, false), []);\r\n\tconst progressBar = React.useRef();\r\n\t\r\n\tconst handleMouseEnter = () => {\r\n\t\ttimer.pause();\r\n\t\tprogressBar.current.style.animationPlayState = \"paused\";\r\n\t};\r\n\t\r\n\tconst handleMouseLeave = () => {\r\n\t\ttimer.resume();\r\n\t\tprogressBar.current.style.animationPlayState = \"running\";\r\n\t};\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tconst handleFocus = () => !fixedTime && handleMouseLeave();\r\n\t\tconst handleBlur = () => !fixedTime && handleMouseEnter();\r\n\t\t\r\n\t\twindow.addEventListener(\"focus\", handleFocus);\r\n\t\twindow.addEventListener(\"blur\", handleBlur);\r\n\t\t\r\n\t\t(fixedTime || document.hasFocus()) && handleMouseLeave();\r\n\t\t\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener(\"focus\", handleFocus);\r\n\t\t\twindow.removeEventListener(\"blur\", handleBlur);\r\n\t\t};\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<div className={joinClassNames(\"Toast\", [closing, \"Closing\"], type)}\r\n\t\t\t onMouseEnter={fixedTime ? null : handleMouseEnter}\r\n\t\t\t onMouseLeave={fixedTime ? null : handleMouseLeave}\r\n\t\t\t onClick={callback ? e => { callback(e); timer.end(); } : () => { timer.end(); }}\r\n\t\t\t style={{ cursor: callback ? \"pointer\" : null, backgroundColor: color }}>\r\n\t\t\t{ children }\r\n\r\n\t\t\t<div className=\"ProgressBarContainer\">\r\n\t\t\t\t<div ref={progressBar} className=\"ProgressBar\" style={{ animationDuration: life + \"s\" }}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default class Toasts extends React.Component {\r\n\tstatic instance;\r\n\tstatic ref = React.createRef();\r\n\t\r\n\tstate = { toasts: [] };\r\n\r\n\tcomponentDidMount() {\r\n\t\tToasts.instance = this;\r\n\t}\r\n\t\r\n\tstatic showToast(children, type = \"\", life = 5, additionalOptions = {}) {\r\n\t\tconst { callback = null, color = null, fixedTime = false } = additionalOptions;\r\n\t\t\r\n\t\tconst toast = React.createElement(Toast, {\r\n\t\t\tkey: getRandomKey(),\r\n\t\t\tchildren, type, life, color, fixedTime,\r\n\t\t\tremove: () => {\r\n\t\t\t\tthis.instance.setState({ toasts: this.instance.state.toasts.filter(t => t !== toast) });\r\n\t\t\t},\r\n\t\t\tcallback\r\n\t\t});\r\n\r\n\t\tthis.instance.setState({ toasts: [ ...this.instance.state.toasts, toast ] });\r\n\t\treturn toast;\r\n\t}\r\n\t\r\n\tget horizontalStyle() {\r\n\t\treturn \"Center\";\r\n\t\t\r\n\t\t// switch (Settings.props.notifications.toasts.positionX) {\r\n\t\t// \tcase 0:\r\n\t\t// \t\treturn \"Left\";\r\n\t\t// \tcase 1:\r\n\t\t// \t\treturn \"Center\";\r\n\t\t// \tcase 2:\r\n\t\t// \t\treturn \"Right\";\r\n\t\t// }\r\n\t}\r\n\t\r\n\tget verticalStyle() {\r\n\t\treturn \"Bottom\";\r\n\t\t\r\n\t\t// switch (Settings.props.notifications.toasts.positionY) {\r\n\t\t// \tcase 0:\r\n\t\t// \t\treturn \"Top\";\r\n\t\t// \tcase 1:\r\n\t\t// \t\treturn \"Bottom\";\r\n\t\t// }\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div ref={Toasts.ref} className={joinClassNames(\"ToastsContainer\", this.horizontalStyle, this.verticalStyle)}>\r\n\t\t\t\t<div className={joinClassNames(\"ClearButton\", [!!this.state.toasts?.length, \"Visible\"])} onClick={() => this.setState({ toasts: [] })}>\r\n\t\t\t\t\t<u>Close all</u>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t{ this.state.toasts }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport \"./ErrorBoundary.scss\";\r\nimport { closeModal, openModal } from \"./Modals\";\r\n\r\nexport default class ErrorBoundary extends React.Component {\r\n    state = { error: null, errorInfo: null, moreInfo: false };\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    \r\n    componentDidCatch(error, errorInfo) {\r\n        // console.error(error, errorInfo);\r\n        \r\n        this.setState({ error, errorInfo });\r\n    }\r\n    \r\n    showErrorInfo() {\r\n        const { error, errorInfo } = this.state;\r\n        \r\n        openModal(\r\n            <div className=\"ErrorInfoModal PrimaryBg\" onClick={() => closeModal()}>\r\n                <h1>{error.message}</h1>\r\n                { errorInfo.componentStack.split(\"\\n\").slice(0, 10).map((msg, i) => <h2 key={i}>{msg}</h2>) }\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    renderError() {\r\n        const { moreInfo } = this.state;\r\n        \r\n        return (\r\n            <div className=\"ErrorBoundaryHandler\">\r\n                <h1>There was an error with this component!</h1>\r\n                <h2>This is due to a plugin error or application error.</h2>\r\n                \r\n                <div className=\"ErrorBoundaryFooter\">\r\n                    <div className=\"ErrorBoundaryButton TertiaryBg\" onClick={() => this.showErrorInfo()}>More Info</div>\r\n                    <div className=\"ErrorBoundaryButton BackgroundDanger\" onClick={() => this.setState({ error: null })}>Retry</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        if (this.state.error)\r\n            return this.renderError();\r\n        \r\n        return this.props.children;\r\n    }\r\n}","import React from \"react\";\r\nimport \"./Dropdown.scss\";\r\n\r\nexport default class extends React.Component {\r\n\tstate = { value: null, open: false };\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.value) {\r\n\t\t\tthis.setState({ value: this.props.items[this.props.value].value });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.props.callback) {\r\n\t\t\tthis.props.callback(this);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={\"Dropdown\" + (this.state.open ? \" Open\" : \"\")}>\r\n\t\t\t\t<div className={\"DropdownItem Selected\" + (!this.state.value ? \" Grayed\" : \"\")} onClick={() => this.setState({ open: !this.state.open })}>\r\n\t\t\t\t\t{ (this.props.items.find(item => item.value === this.state.value) || {}).label || this.props.placeholder || \"None selected\" }\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{ this.props.items.map(({ key, value, label }) => (\r\n\t\t\t\t\t<div key={key} className=\"DropdownItem\" onClick={() => this.setState({ value, open: false })}>\r\n\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)) }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import PostList from \"./Components/PostList\";\r\nimport Toasts from \"./Components/Toasts\";\r\n\r\nObject.find = function(obj, path) {\r\n\tlet r = obj;\r\n\tlet p = path.split(\".\");\r\n\r\n\tfor (let k of p) {\r\n\t\tif (r) {\r\n\t\t\tr = r[k];\r\n\t\t}\r\n\t}\r\n\r\n\treturn r;\r\n}\r\n\r\nconst _fetch = fetch;\r\nlet lastDidApi = -600;\r\nfetch = async function() {\r\n\tif (performance.now() - lastDidApi < 600)\r\n\t\tawait new Promise(r => setTimeout(r, 600));\r\n\tlastDidApi = performance.now();\r\n\r\n\treturn await _fetch.call(window, ...arguments);\r\n};\r\n\r\nconst API = {\r\n\tlogin: {\r\n\t\tlogin: localStorage.getItem(\"username\"),\r\n\t\tapi_key: localStorage.getItem(\"apiKey\")\r\n\t},\r\n\r\n\tendpoint: function(sub, args = {}, explicitSub = false) {\r\n\t\tlet login = this.login;\r\n\r\n\t\tif (!login.login || !login.api_key)\r\n\t\t\tlogin = {};\r\n\t\t\r\n\t\tObject.assign(args, { ...login, _client: \"Sucralose/1.0 by roclo\" })\r\n\r\n\t\tlet query = \"\";\r\n\r\n\t\tfor (let a in args) {\r\n\t\t\tif (query.length > 0)\r\n\t\t\t\tquery += \"&\";\r\n\r\n\t\t\tquery += a + \"=\" + args[a];\r\n\t\t}\r\n\r\n\t\treturn \"https://e621.net/\" + sub + (explicitSub ? \"?\" : \".json?\") + query;\r\n\t},\r\n\r\n\tfetchLocalUserId: async function() {\r\n\t\ttry {\r\n\t\t\tconst res = await fetch(this.endpoint(\"users/home\", {}, true));\r\n\t\t\tconst html = await res.text();\r\n\t\t\tconst dom = new DOMParser().parseFromString(html, \"text/html\");\r\n\r\n\t\t\tif (dom.getElementsByClassName(\"guest-warning\").length > 0)\r\n\t\t\t\treturn null;\r\n\t\t\t\r\n\t\t\tconst profileButton = [...dom.getElementsByClassName(\"link-page\")[0].getElementsByTagName(\"a\")]\r\n\t\t\t\t.find(a => a.innerText === \"My profile\" && a.pathname.startsWith(\"/users/\"));\r\n\r\n\t\t\tif (profileButton)\r\n\t\t\t\treturn profileButton.pathname.split(\"/\")[2];\r\n\t\t\treturn null;\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport function formatCamelCase(camelCase) {\r\n\tconst r = camelCase.replace(/([A-Z])/g, \" $1\");\r\n\r\n\treturn r.charAt(0).toUpperCase() + r.slice(1);\r\n}\r\n\r\nconst Serializer = {\r\n\tload: function(key, fallback = null, isObject = true) {\r\n\t\tconst string = localStorage.getItem(key);\r\n\r\n\t\tif (isObject)\r\n\t\t\treturn string === null ? fallback : JSON.parse(string);\r\n\t\treturn string === null ? fallback : string;\r\n\t},\r\n\r\n\tsave: function(key, data, isObject = true) {\r\n\t\tif (isObject)\r\n\t\t\treturn localStorage.setItem(key, JSON.stringify(data));\r\n\t\treturn localStorage.setItem(key, data);\r\n\t}\r\n};\r\n\r\nconst Order = {\r\n\tDefault: \"\",\r\n\tRandom: \"order:random\",\r\n\tScore: \"order:score\",\r\n\tFavCount: \"order:favcount\",\r\n\tTagCount: \"order:tagcount\",\r\n\tResolution: \"order:mpixels\",\r\n\tFileSize: \"order:filesize\"\r\n};\r\n\r\nfunction url(url) {\r\n\treturn `url(${url})`;\r\n}\r\n\r\nfunction getPageArgs(sub) {\r\n\tconst split = window.location.hash.split(\"?\")[0].split(\"/\");\r\n\tconst i = split.indexOf(sub);\r\n\r\n\treturn i === -1 ? \"\" : decodeURIComponent(split[i + 1] || \"\");\r\n}\r\n\r\nfunction setPageArgs(sub, to) {\r\n\tconst split = window.location.hash.split(\"/\");\r\n\tconst i = split.indexOf(sub);\r\n\r\n\tif (i !== -1 && split[i + 1]) {\r\n\t\tsplit[i + 1] = encodeURIComponent(to);\r\n\r\n\t\treturn split.join(\"/\");\r\n\t}\r\n\r\n\treturn `${window.location.hash}${window.location.hash.endsWith(\"/\") ? \"\" : \"/\"}${sub}/${encodeURIComponent(to)}`;\r\n}\r\n\r\nfunction bytesToString(bytes) {\r\n\tconst suf = [\"bytes\", \"KB\", \"MB\", \"GB\"];\r\n\tconst i = Math.floor(Math.log(bytes) / Math.log(1024));\r\n\r\n\treturn parseFloat((bytes / Math.pow(1024, i)).toFixed(2)) + \" \" + suf[i];\r\n}\r\n\r\nfunction download(uri) {\r\n\tfetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(uri)}`)\r\n\t\t.then(res => res.blob())\r\n\t\t.then(blob => {\r\n\t\t\tconst a = Object.assign(document.createElement(\"a\"), {\r\n\t\t\t\tstyle: { display: \"none\" },\r\n\t\t\t\thref: URL.createObjectURL(blob),\r\n\t\t\t\tdownload: uri.split(\"/\")[uri.split(\"/\").length - 1]\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\ta.click();\r\n\t\t\t\r\n\t\t\twindow.URL.revokeObjectURL(a.href);\r\n\t\t\ta.remove();\r\n\t\t})\r\n\t\t.catch(err => (console.error(err), Toasts.showToast(\"Failed to save image!\", \"Failure\")));\r\n}\r\n\r\nconst Query = {\r\n\tconvert: () => {\r\n\t\tconst query = (document.location.href.split(\"?\")[1] || \"\").split(\"&\");\r\n\t\tconst ret = {};\r\n\r\n\t\tfor (let q of query) {\r\n\t\t\tconst [ key, value ] = q.split(\"=\");\r\n\r\n\t\t\tif (!key || !value)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tret[key] = value;\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t},\r\n\r\n\tset: (key, value) => {\r\n\t\tkey = encodeURIComponent(key);\r\n\t\tvalue = encodeURIComponent(value);\r\n\r\n\t\tconst query = Query.convert();\r\n\t\tquery[key] = value;\r\n\r\n\t\tlet q = \"\";\r\n\t\tfor (let k in query) {\r\n\t\t\tif (!k || !query[k]?.length)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tq += `${q.length === 0 ? \"?\" : \"&\"}${k}=${query[k]}`;\r\n\t\t}\r\n\t\t\r\n\t\tconst newHref = window.location.href.split(\"?\")[0] + q;\r\n\t\t\r\n\t\tif (window.location.href === newHref)\r\n\t\t\treturn query;\r\n\r\n\t\twindow.history.pushState({}, \"\", newHref);\r\n\t\treturn query;\r\n\t},\r\n\r\n\tget: key => Query.convert()[key]\r\n};\r\n\r\nfunction getSiteBase() {\r\n\treturn window.location.hostname === \"localhost\" ? window.location.origin : window.location.origin + \"/sucralose\"; \r\n}\r\n\r\nexport { API, Serializer, Order, url, getPageArgs, setPageArgs, bytesToString, download, Query, getSiteBase };","export default __webpack_public_path__ + \"static/media/Chevron.c3ee4024.svg\";","import React, { createRef } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./ContextMenuHandler.scss\";\r\n\r\nimport ChevronIcon from \"../Icons/Chevron.svg\";\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nclass ContextMenu extends React.Component {\r\n\tref = createRef();\r\n\r\n\tdocClickEv = e => {\r\n\t\tif (this.ref.current && !this.ref.current.contains(e.target) && !document.getElementsByClassName(\"ContextMenu\")[0].contains(e.target)) {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tif (ContextMenu.activeWrapper) {\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.addEventListener(\"click\", this.docClickEv);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.removeEventListener(\"click\", this.docClickEv);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<div className=\"ContextMenu\" {...this.props} ref={this.ref}>\r\n\t\t\t\t\t{ this.props.children }\r\n\t\t\t\t</div>\r\n\t\t\t</ErrorBoundary>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nContextMenu.Handler = class extends React.Component {\r\n\tstatic ref = createRef();\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<div ref={ContextMenu.Handler.ref} className=\"ContextMenuWrapper MainContextMenuContainer\">\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</ErrorBoundary>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nContextMenu.Wrapper = class extends React.Component {\r\n\tstate = { menu: null, open: false };\r\n\tref = createRef();\r\n\t\r\n\tget publicProps() {\r\n\t\treturn Object.exclude(this.props, \"menu\", \"openOnClick\", \"wrapperClassName\", \"overrideX\", \"overrideY\");\r\n\t}\r\n\r\n\thandleContextMenu = e => {\r\n\t\tif (typeof(e.preventDefault) === \"function\")\r\n\t\t\te.preventDefault();\r\n\r\n\t\tif (ContextMenu.activeWrapper) {\r\n\t\t\tif (this.ref.current.contains(ContextMenu.activeWrapper.ref.current) && ContextMenu.activeWrapper.props.menu !== this.props.menu)\r\n\t\t\t\treturn;\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\r\n\t\tContextMenu.activeWrapper = this;\r\n\t\t\r\n\t\tlet top = this.props.menu.props.overrideY?.() || e.clientY;\r\n\t\tlet left = this.props.menu.props.overrideX?.() || e.clientX;\r\n\t\t\r\n\t\twhile (left + 200 > window.innerWidth)\r\n\t\t\tleft -= 10;\r\n\t\t\r\n\t\tthis.setState({ menu: ReactDOM.createPortal(\r\n\t\t\t\t<div className=\"ContextMenuContainer SecondaryBg\" {...this.publicProps} style={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\ttop, left \r\n\t\t\t\t}}>{ this.props.menu }</div>, ContextMenu.Handler.ref.current), open: true });\r\n\t}\r\n\r\n\tasync componentDidUpdate(prevProps, prevState, snapshot) {\r\n\t\tif (ContextMenu.activeWrapper === this && !this.state.open)\r\n\t\t\tContextMenu.activeWrapper = null;\r\n\t\t\r\n\t\tif (this.state.open && this.ref.current) {\r\n\t\t\tconst [ menu ] = document.getElementsByClassName(\"ContextMenuContainer\");\r\n\t\t\tconst rect = menu.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tmenu.style.transform = rect.y + rect.height > window.innerHeight\r\n\t\t\t\t? `translateY(${window.innerHeight - (rect.y + rect.height) - 20}px)`\r\n\t\t\t\t: null;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn this.props.menu ? (\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<div ref={this.ref} className={\"ContextMenuWrapper \" + (this.props.wrapperClassName || \"\")} onClick={this.props.openOnClick ? e => {\r\n\t\t\t\t\tif (typeof(e.target.onClick) === \"function\")\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.handleContextMenu(this.props.openOnClick());\r\n\t\t\t\t} : null}\r\n\t\t\t\t\t {...this.publicProps} onContextMenu={this.handleContextMenu}>\r\n\t\t\t\t\t{ this.props.children }\r\n\t\t\t\t\t\r\n\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t{ this.state.open ? this.state.menu : null }\r\n\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t</div>\r\n\t\t\t</ErrorBoundary>\r\n\t\t) : this.props.children;\r\n\t}\r\n}\r\n\r\nContextMenu.Item = class extends React.Component {\r\n\thandleClick = e => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\t\r\n\t\tif (ContextMenu.activeWrapper && this.props.autoClose) {\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\r\n\t\tif (this.props.onClick) {\r\n\t\t\tthis.props.onClick(this);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst props = Object.assign({}, this.props);\r\n\r\n\t\tdelete props.autoClose;\r\n\t\tdelete props.icon;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"ContextMenuItem\" {...props} onClick={this.handleClick}>\r\n\t\t\t\t{ this.props.icon ? <FontAwesomeIcon icon={this.props.icon} className=\"Icon\"/> : null }\r\n\t\t\t\t\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nContextMenu.SubMenuItem = class extends React.Component {\r\n\tstate = { open: false };\r\n\r\n\thandleMouseEnter = () => {\r\n\t\tthis.setState({ open: true });\r\n\t}\r\n\r\n\thandleMouseLeave = () => {\r\n\t\tthis.setState({ open: false });\r\n\t}\r\n\r\n\thandleClick = e => {\r\n\t\tif (e.target != e.currentTarget) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (ContextMenu.activeWrapper && this.props.autoClose) {\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\r\n\t\tif (this.props.onClick) {\r\n\t\t\tthis.props.onClick(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tmount(menu) {\r\n\t\tif (!menu) return;\r\n\t\tconst rect = menu.getBoundingClientRect();\r\n\r\n\t\tmenu.style.transform = rect.y + rect.height > window.innerHeight\r\n\t\t\t? `translateY(${window.innerHeight - (rect.y + rect.height) - 20}px)`\r\n\t\t\t: null;\r\n\t\t\r\n\t\tif (rect.x + rect.width > window.innerWidth) {\r\n\t\t\tmenu.style.left = \"unset\";\r\n\t\t\tmenu.style.right = \"100%\";\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst props = Object.assign({}, this.props);\r\n\r\n\t\tdelete props.autoClose;\r\n\t\tdelete props.label;\r\n\t\tdelete props.icon;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"ContextMenuItem HasSubMenu\" {...props} onClick={this.handleClick} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\r\n\t\t\t\t{ this.props.icon ? <FontAwesomeIcon icon={this.props.icon} className=\"Icon\"/> : null }\r\n\t\t\t\t{ this.props.label } <img className=\"ContextSubMenuChevron\" src={ChevronIcon}/>\r\n\t\t\t\t{ this.state.open ? (\r\n\t\t\t\t\t<div className=\"ContextMenuContainer SubMenuContainer SecondaryBg\" ref={this.mount}>\r\n\t\t\t\t\t\t<div className=\"ContextMenu SubMenu\">\r\n\t\t\t\t\t\t\t{ this.props.children }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nContextMenu.ToggleItem = class extends React.Component {\r\n\tstate = { checked: false };\r\n\r\n\tcallback = () => {\r\n\t\tif (ContextMenu.activeWrapper && this.props.autoClose) {\r\n\t\t\tContextMenu.activeWrapper.setState({ menu: null, open: false });\r\n\t\t}\r\n\r\n\t\tconst checked = !this.state.checked;\r\n\r\n\t\tif (this.props.callback) {\r\n\t\t\tthis.props.callback(checked);\r\n\t\t}\r\n\r\n\t\tthis.setState({ checked });\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ checked: this.props.checked });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst props = Object.assign({}, this.props);\r\n\r\n\t\tdelete props.autoClose;\r\n\t\tdelete props.callback;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"ContextMenuItem ToggleItem\" {...props} onClick={this.callback}>\r\n\t\t\t\t<div className={\"ToggleBox\" + (this.state.checked ? \" Checked\" : \"\")}>\r\n\t\t\t\t\t{ this.state.checked ? (<div className=\"ToggleBoxTick\"/>) : null }\r\n\t\t\t\t</div>\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nContextMenu.Divider = class extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"ContextMenuDivider\" {...this.props}/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default ContextMenu;","export default __webpack_public_path__ + \"static/media/Spinner.bc3f17b3.svg\";","import React from \"react\";\r\nimport \"./InlineLoading.scss\";\r\n\r\nexport default function InlineLoading() {\r\n    return (\r\n        <div className=\"InlineLoadingContainer\">\r\n            <div className=\"Dot A\"/>\r\n            <div className=\"Dot B\"/>\r\n            <div className=\"Dot C\"/>\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport { Query, setPageArgs, url } from \"../Constants\";\r\nimport { closeModal } from \"./Modals\";\r\nimport \"./PostModal.scss\";\r\n\r\nimport Spinner from \"../Icons/Spinner.svg\";\r\nimport Chevron from \"../Icons/Chevron.svg\";\r\nimport PostList from \"./PostList\";\r\nimport ContextMenu from \"./ContextMenuHandler\";\r\nimport Post, { PostContextMenu } from \"./Post\";\r\nimport InlineLoading from \"./InlineLoading\";\r\n\r\nexport class PostModalContextMenu extends React.Component {\r\n\tstate = { upvotes: 0, downvotes: 0, selfScore: 0, favorited: false };\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.is_favorited) {\r\n\t\t\tthis.setState({ favorited: true });\r\n\t\t}\r\n\t}\r\n\r\n\tasync vote(vote) {\r\n\t\tthis.setState(await Post.vote(this.props.id, vote));\r\n\t}\r\n\r\n\tasync favorite() {\r\n\t\tthis.setState(await Post.favorite(this.props.id, this.state.favorited));\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ContextMenu>\r\n\t\t\t\t<ContextMenu.Item className=\"ContextMenuItem VotesItem\">\r\n\t\t\t\t\t<div className=\"Votes\">\r\n\t\t\t\t\t\t<span className={this.state.selfScore > 0 ? \"Voted\" : null} onClick={() => this.vote(1)}>🔼 { this.state.upvotes || this.props.score.up }</span>\r\n\t\t\t\t\t\t<span className={this.state.selfScore < 0 ? \"Voted\" : null} onClick={() => this.vote(-1)}>🔽 { -(this.state.downvotes || this.props.score.down) }</span>\r\n\t\t\t\t\t\t<span className={this.state.favorited ? \"Voted\" : null} onClick={() => this.favorite()}>💙 { this.props.fav_count + (this.state.favorited ? 1 : 0) }</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ContextMenu.Item>\r\n\r\n\t\t\t\t<ContextMenu.Divider/>\r\n\r\n\t\t\t\t<PostContextMenu {...this.props}/>\r\n\t\t\t</ContextMenu>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default class PostModal extends React.Component {\r\n\tstatic current;\r\n\tstate = { loaded: false, post: {} };\r\n\tclose = back => {\r\n\t\tcloseModal();\r\n\t\t\r\n\t\tif (back === true)\r\n\t\t\tQuery.set(\"post\", \"\");\r\n\t\telse return true;\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ post: this.props });\r\n\r\n\t\tQuery.set(\"post\", this.props.id);\r\n\t\twindow.events.subscribe(\"popstate\", this.close, { priority: 1000 });\r\n\t\t\r\n\t\tPostModal.current = this;\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tQuery.set(\"post\", \"\");\r\n\t\twindow.events.unsubscribe(\"popstate\", this.close);\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (!this.state.loaded) {\r\n\t\t\tif ((Object.find(this.state.post, \"file.ext\") || \"\") === \"webm\")\r\n\t\t\t\treturn this.setState({ loaded: true });\r\n\r\n\t\t\tconst img = new Image();\r\n\t\t\timg.addEventListener(\"load\", () => this.setState({ loaded: true }));\r\n\t\t\timg.src = this.state.post.file.url;\r\n\t\t}\r\n\t}\r\n\r\n\tgetOffsetPost(offset) {\r\n\t\treturn PostList.instance.state.posts[PostList.instance.state.posts.findIndex(post => post.id === this.state.post.id) + offset];\r\n\t}\r\n\r\n\thandleClick(e) {\r\n\t\tif (e.target.classList.contains(\"NavButton\")) {\r\n\t\t\tconst i = e.target.classList.contains(\"Next\") ? 1 : -1;\r\n\r\n\t\t\tif (this.getOffsetPost(i)) {\r\n\t\t\t\tthis.setState({ post: this.getOffsetPost(i), loaded: false });\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (e.target.classList.contains(\"Image\") || e.target.classList.contains(\"ContextMenuWrapper\"))\r\n\t\t\tthis.close(true);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { post } = this.state;\r\n\t\tconst previewUrl = Object.find(post, \"preview.url\");\r\n\t\tconst fileUrl = Object.find(post, \"file.url\");\r\n\r\n\t\tlet el = null;\r\n\r\n\t\tif (post && post.file) {\r\n\t\t\tswitch (post.file.ext) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tel = (<div className=\"Image\" style={{ backgroundImage: url(fileUrl) }}/>);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"webm\":\r\n\t\t\t\t\tel = (\r\n\t\t\t\t\t\t<video controls className=\"Image Video\">\r\n\t\t\t\t\t\t\t<source src={fileUrl} type=\"video/webm\"/>\r\n\t\t\t\t\t\t</video>\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"PostModal\" onClick={e => this.handleClick(e)}>\r\n\t\t\t\t<div className={\"Image\" + (this.state.loaded ? \"\" : \" Preview\")} style={{\r\n\t\t\t\t\tbackgroundImage: !post || !post.file || post.file.ext === \"webm\" || this.state.loaded ? null : url(previewUrl)\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{ this.state.loaded ? (\r\n\t\t\t\t\t\t<ContextMenu.Wrapper menu={<PostModalContextMenu {...post}/>}>\r\n\t\t\t\t\t\t\t{ el }\r\n\t\t\t\t\t\t</ContextMenu.Wrapper>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span className=\"SpinnerOverlay\">\r\n\t\t\t\t\t\t\t<InlineLoading/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t) }\r\n\r\n\t\t\t\t\t<div className=\"NavButtons\">\r\n\t\t\t\t\t\t<img src={Chevron} className={\"NavButton Prev\" + (this.getOffsetPost(-1) === null ? \" Disabled\" : \"\")}/>\r\n\t\t\t\t\t\t<img src={Chevron} className={\"NavButton Next\" + (this.getOffsetPost(1) === null ? \" Disabled\" : \"\")}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport \"./LinkWrapper.scss\";\r\n\r\nexport default class extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<a className=\"LinkWrapper\" {...this.props}>\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</a>\r\n\t\t);\r\n\t}\r\n}","export default __webpack_public_path__ + \"static/media/Search.cc51b702.svg\";","import React from \"react\";\r\nimport \"./SearchBar.scss\";\r\n\r\nimport Spinner from \"../Icons/Spinner.svg\";\r\nimport Search from \"../Icons/Search.svg\";\r\nimport { API } from \"../Constants\";\r\n\r\nexport default class SearchBar extends React.Component {\r\n\tstate = { searching: false, acResults: [] };\r\n\r\n\tcomponentDidMount() {\r\n\t\tSearchBar.instance = this;\r\n\t}\r\n\r\n\thandleKeyDown(e) {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\twindow.search(e.target.textContent);\r\n\t\t}\r\n\t}\r\n\r\n\tacUpdateInstance = -1;\r\n\thandleInput(e) {\r\n\t\tconst { textContent } = e.target;\r\n\r\n\t\tclearTimeout(this.acUpdateInstance);\r\n\r\n\t\tthis.acUpdateInstance = setTimeout(() => {\r\n\t\t\tthis.handleAutoCompleteUpdate(textContent.split(\" \")).catch(console.warn);\r\n\t\t}, 200);\r\n\t}\r\n\r\n\tasync handleAutoCompleteUpdate(words) {\r\n\t\tconst search = (words[words.length - 1] || \"\").replace(/(-|~)/g, \"\");\r\n\r\n\t\tif (!search)\r\n\t\t\treturn this.setState({ acResults: [] });\r\n\r\n\t\tconst res = await fetch(API.endpoint(\"tags\", {\r\n\t\t\tcommit: \"Search\",\r\n\t\t\tlimit: 10,\r\n\t\t\t\"search[hide_empty]\": \"yes\",\r\n\t\t\t\"search[name_matches]\": search.replace(/\\*/g, \"\") + \"*\",\r\n\t\t\t\"search[order]\": \"count\",\r\n\t\t}));\r\n\t\tconst acResults = await res.json();\r\n\r\n\t\tthis.setState({ acResults });\r\n\t}\r\n\r\n\thandleAutoCompleteSelect(tag) {\r\n\t\tconst [ searchBar ] = document.getElementsByClassName(\"SearchBar\");\r\n\t\tconst content = searchBar.textContent.split(\" \");\r\n\t\tcontent.pop();\r\n\r\n\t\tsearchBar.textContent = `${content.join(\" \")} ${tag}`;\r\n\t\tsearchBar.focus();\r\n\t\tdocument.execCommand(\"selectAll\", false, null);\r\n\t\tdocument.getSelection().collapseToEnd();\r\n\r\n\t\tthis.setState({ acResults: [] });\r\n\t}\r\n\r\n\thandleFocusChange({ currentTarget: { parentElement, textContent } }, focused) {\r\n\t\tconst [ autoComplete ] = parentElement.getElementsByClassName(\"AutoComplete\");\r\n\r\n\t\tif (focused) {\r\n\t\t\tparentElement.classList.add(\"Focused\");\r\n\t\t\tautoComplete.style.opacity = 1;\r\n\t\t} else {\r\n\t\t\tif (textContent.length === 0)\r\n\t\t\t\tparentElement.classList.remove(\"Focused\");\r\n\r\n\t\t\tautoComplete.style.opacity = null;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { acResults } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"SearchBarContainer\">\r\n\t\t\t\t<div contentEditable className=\"SearchBar\"\r\n\t\t\t\t\tonKeyDown={e => this.handleKeyDown(e)}\r\n\t\t\t\t\tonFocus={e => this.handleFocusChange(e, true)}\r\n\t\t\t\t\tonBlur={e => this.handleFocusChange(e, false)}\r\n\t\t\t\t\tonInput={e => this.handleInput(e)}/>\r\n\r\n\t\t\t\t<img src={this.state.searching ? Spinner : Search} className={this.state.searching ? \"Spinner\" : null}\r\n\t\t\t\t\tonClick={e => window.search(e.target.previousSibling.textContent)}/>\r\n\r\n\t\t\t\t{ this.props.children }\r\n\r\n\t\t\t\t<div className=\"AutoComplete\">\r\n\t\t\t\t\t{ acResults && acResults.length ? acResults.map(({ id, name, post_count }) => (\r\n\t\t\t\t\t\t<div className=\"Result\" key={id} onClick={() => this.handleAutoCompleteSelect(name)}>\r\n\t\t\t\t\t\t\t<span className=\"Title\">{ name }</span>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<span className=\"Count\">{ post_count }</span>\r\n\t\t\t\t\t\t\t\tposts\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)) : null }\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport App from \"../App\";\r\nimport { Serializer } from \"../Constants\";\r\nimport ContextMenu from \"./ContextMenuHandler\";\r\nimport LinkWrapper from \"./LinkWrapper\";\r\nimport \"./PostTagsList.scss\";\r\nimport SearchBar from \"./SearchBar\";\r\n\r\nexport class PostTagContextMenu extends React.Component {\r\n\tsearchBar = document.getElementsByClassName(\"SearchBar\")[0];\r\n\r\n\tsearchContains() {\r\n\t\treturn this.searchBar.textContent.includes(this.props.tag);\r\n\t}\r\n\r\n\thandleClick(e) {\r\n\t\tswitch (e.target.id) {\r\n\t\t\tcase \"search\":\r\n\t\t\t\tthis.searchBar.textContent += \" \" + this.props.tag;\r\n\t\t\t\tthis.searchBar.parentElement.classList.add(\"Focused\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"unsearch\":\r\n\t\t\t\tthis.searchBar.textContent = this.searchBar.textContent.split(this.props.tag).join(\"\");\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"subscribe\":\r\n\t\t\t\tApp.settings.subscriptions.push(this.props.tag);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"unsubscribe\":\r\n\t\t\t\tApp.settings.subscriptions.splice(App.settings.subscriptions.indexOf(this.props.tag), 1);\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"blacklist\":\r\n\t\t\t\tApp.settings.blacklist.push(this.props.tag);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"unblacklist\":\r\n\t\t\t\tApp.settings.blacklist.splice(App.settings.blacklist.indexOf(this.props.tag), 1);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tApp.saveSettings();\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ContextMenu onClick={e => this.handleClick(e)}>\r\n\t\t\t\t{ !this.searchContains() ?\r\n\t\t\t\t\t(<ContextMenu.Item id=\"search\">Add To Search</ContextMenu.Item>) :\r\n\t\t\t\t\t(<ContextMenu.Item id=\"unsearch\">Remove From Search</ContextMenu.Item>)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<ContextMenu.Divider/>\r\n\r\n\t\t\t\t{ !App.settings.subscriptions.includes(this.props.tag) ?\r\n\t\t\t\t\t(<ContextMenu.Item id=\"subscribe\">Subscribe To Tag</ContextMenu.Item>) :\r\n\t\t\t\t\t(<ContextMenu.Item id=\"unsubscribe\">Unsubscribe To Tag</ContextMenu.Item>)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{ !App.settings.blacklist.includes(this.props.tag) ?\r\n\t\t\t\t\t(<ContextMenu.Item id=\"blacklist\">Add To Blacklist</ContextMenu.Item>) :\r\n\t\t\t\t\t(<ContextMenu.Item id=\"unblacklist\">Remove From Blacklist</ContextMenu.Item>)\r\n\t\t\t\t}\r\n\t\t\t</ContextMenu>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default class extends React.Component {\r\n\trender() {\r\n\t\tconst { tags } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"PostTags\">\r\n\t\t\t\t{ Object.keys(tags).map(category => (\r\n\t\t\t\t\t[\"invalid\", \"lore\", \"meta\"].includes(category) && tags[category].length === 0 ? null :\r\n\t\t\t\t\t(<div key={category} className=\"CategoryLabel\">\r\n\t\t\t\t\t\t<b>{ category.replace(/^[a-z]/, c => c.toUpperCase()) }</b>\r\n\r\n\t\t\t\t\t\t{ tags[category].length > 0 ? \r\n\t\t\t\t\t\t\ttags[category].map(tag => (\r\n\t\t\t\t\t\t\t\t<ContextMenu.Wrapper key={tag} menu={<PostTagContextMenu tag={tag}/>}>\r\n\t\t\t\t\t\t\t\t\t<LinkWrapper href={\"#/search/\" + tag}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"Tag\">{ tag }</div>\r\n\t\t\t\t\t\t\t\t\t</LinkWrapper>\r\n\t\t\t\t\t\t\t\t</ContextMenu.Wrapper>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t : (<div className=\"TagPlaceholder\">No tags here.</div>) }\r\n\t\t\t\t\t</div>)\r\n\t\t\t\t)) }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport ContextMenu from \"./ContextMenuHandler\";\r\nimport App from \"../App\";\r\nimport { API, download, url } from \"../Constants\";\r\nimport { copyToClipboard, openModal } from \"./Modals\";\r\nimport \"./Post.scss\";\r\nimport PostModal from \"./PostModal\";\r\nimport { PostTagContextMenu } from \"./PostTagsList\";\r\nimport Toasts, { Toast } from \"./Toasts\";\r\nimport LinkWrapper from \"./LinkWrapper\";\r\nimport {\r\n\tfaCaretSquareDown,\r\n\tfaCaretSquareUp,\r\n\tfaClipboard, faCog,\r\n\tfaDownload,\r\n\tfaExternalLinkAlt, faHeart,\r\n\tfaImage,\r\n\tfaLayerGroup,\r\n\tfaPlus\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport InlineLoading from \"./InlineLoading\";\r\n\r\n/* Todo\r\n\tFigure out how to fix the preflight request on favorites.json DELETE method.\r\n\tHandle flash files.\r\n*/\r\n\r\nexport class PostContextMenu extends React.Component {\r\n\tasync handleSet(set, toggle) {\r\n\t\tconst res = await fetch(API.endpoint(\"post_sets/\" + set.id + (set.post_ids.includes(this.props.id) ? \"/remove_posts\" : \"/add_posts\"),\r\n\t\t\t{ \"post_ids[]\": this.props.id }), { method: \"POST\" });\r\n\t\tApp.postSets[App.postSets.findIndex(s => s.id === set.id)] = await res.json();\r\n\t\t\r\n\t\t// toggle.setState({ checked: !set.post_ids.includes(this.props.id) });\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ContextMenu>\r\n\t\t\t\t<ContextMenu.Item autoClose onClick={() => window.open(this.props.file.url, \"_blank\")} icon={faImage}>View Image</ContextMenu.Item>\r\n\t\t\t\t<ContextMenu.Item autoClose onClick={() => download(this.props.file.url)} icon={faDownload}>Save Image</ContextMenu.Item>\r\n\t\t\t\t<ContextMenu.Item autoClose onClick={() => copyToClipboard(this.props.file.url)} icon={faClipboard}>Copy Image URL</ContextMenu.Item>\r\n\r\n\t\t\t\t<ContextMenu.Divider/>\r\n\r\n\t\t\t\t<ContextMenu.Item autoClose onClick={() => window.open(\"#/post/\" + this.props.id)} icon={faExternalLinkAlt}>Open In New Tab</ContextMenu.Item>\r\n\r\n\t\t\t\t{ App.loggedIn() && App.postSets ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<ContextMenu.Divider/>\r\n\r\n\t\t\t\t\t\t<ContextMenu.SubMenuItem label=\"Manage Sets\" icon={faLayerGroup}>\r\n\t\t\t\t\t\t\t{ App.postSets.map(set => (\r\n\t\t\t\t\t\t\t\t<ContextMenu.Item key={set.id} onClick={() => this.handleSet(set)}\r\n\t\t\t\t\t\t\t\t\tclassName={\"ContextMenuItem SetContextMenuItem\" + (set.post_ids.includes(this.props.id) ? \" Added\" : \"\")}>\r\n\t\t\t\t\t\t\t\t\t<span>{set.name}</span>\r\n\t\t\t\t\t\t\t\t</ContextMenu.Item>\r\n\t\t\t\t\t\t\t)) }\r\n\r\n\t\t\t\t\t\t\t<ContextMenu.Divider/>\r\n\r\n\t\t\t\t\t\t\t<ContextMenu.Item autoClose onClick={() => window.location.assign(\"#/sets/create\")} icon={faPlus}>Create Set</ContextMenu.Item>\r\n\t\t\t\t\t\t\t<ContextMenu.Item autoClose onClick={() => window.location.assign(\"#/sets/manage\")} icon={faCog}>Manage All</ContextMenu.Item>\r\n\t\t\t\t\t\t</ContextMenu.SubMenuItem>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null }\r\n\t\t\t</ContextMenu>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default class Post extends React.Component {\r\n\tstate = { upvotes: 0, downvotes: 0, selfScore: 0, favorited: false, loading: true };\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ favorited: this.props.is_favorited });\r\n\t}\r\n\r\n\tasync vote(vote) {\r\n\t\tthis.setState(await Post.vote(this.props.id, vote));\r\n\t}\r\n\r\n\tasync favorite() {\r\n\t\tthis.setState(await Post.favorite(this.props.id, this.state.favorited));\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { sample, tags, id, fav_count, score } = this.props;\r\n\t\tconst { loading } = this.state;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<ContextMenu.Wrapper menu={<PostContextMenu {...this.props}/>}>\r\n\t\t\t\t\t<div className=\"Post\">\r\n\t\t\t\t\t\t<img className=\"Preview\" src={sample.url}\r\n\t\t\t\t\t\t\t onClick={openModal.bind(null, <PostModal {...this.props}/>)} alt=\"\"\r\n\t\t\t\t\t\t\t onLoad={() => this.setState({ loading: false })}/>\r\n\t\t\t\t\t\t{ loading ? <InlineLoading/> : null }\r\n\r\n\t\t\t\t\t\t<div className=\"Details PostHeader\">\r\n\t\t\t\t\t\t\t<span><b>Artist{tags.artist.length > 1 ? \"s\" : \"\"}:</b> { tags.artist.map(a => (\r\n\t\t\t\t\t\t\t\t<span key={a}>\r\n\t\t\t\t\t\t\t\t\t<ContextMenu.Wrapper menu={<PostTagContextMenu tag={a}/>}>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"Link\" onClick={() => window.search(a)}>{ a }</span>\r\n\t\t\t\t\t\t\t\t\t</ContextMenu.Wrapper>\r\n\t\t\t\t\t\t\t\t\t{ tags.artist.indexOf(a) + 1 === tags.artist.length ? null : (<span>, </span>) }\r\n\t\t\t\t\t\t\t\t</span>)\r\n\t\t\t\t\t\t\t) }</span>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"Details PostFooter\">\r\n\t\t\t\t\t\t\t<span className={this.state.selfScore > 0 ? \"Voted\" : null} onClick={() => this.vote(1)}>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faCaretSquareUp} className=\"Icon\"/> { this.state.upvotes || score.up }</span>\r\n\t\t\t\t\t\t\t<span className={this.state.selfScore < 0 ? \"Voted\" : null} onClick={() => this.vote(-1)}>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faCaretSquareDown} className=\"Icon\"/> { -(this.state.downvotes || score.down) }</span>\r\n\t\t\t\t\t\t\t<span className={this.state.favorited ? \"Voted\" : null} onClick={() => this.favorite()}>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faHeart}/> { fav_count + (this.state.favorited ? 1 : 0) }</span>\r\n\t\t\t\t\t\t\t<LinkWrapper href={\"#/post/\" + id}>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faExternalLinkAlt}/>\r\n\t\t\t\t\t\t\t</LinkWrapper>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ContextMenu.Wrapper>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nPost.voting = {};\r\nPost.favoriting = {};\r\n\r\nPost.vote = async function(post_id, vote) {\r\n\tif (!App.loggedIn())\r\n\t\treturn App.promptLogin(\"You must be logged in to vote on posts!\");\r\n\r\n\tif (!Post.voting[post_id]) {\r\n\t\tPost.voting[post_id] = true;\r\n\r\n\t\tconst res = await fetch(API.endpoint(\"posts/\" + post_id + \"/votes\", { score: vote, no_unvote: false }), { method: \"POST\" });\r\n\t\tconst data = await res.json();\r\n\t\t\r\n\t\tdelete Post.voting[post_id];\r\n\r\n\t\tToasts.showToast(`${data.our_score === 0 ? \"Removed\" : \"Added\"} ${vote === 1 ? \"up-vote\" : \"down-vote\"} post #${post_id}`);\r\n\r\n\t\treturn { upvotes: data.up, downvotes: data.down, selfScore: data.our_score };\r\n\t}\r\n\telse\r\n\t\tToasts.showToast(\"You're attempting to vote on this post too quickly!\", \"Failure\");\r\n}\r\n\r\nPost.favorite = async function(post_id, favorited) {\r\n\tif (!App.loggedIn())\r\n\t\treturn App.promptLogin(\"You must be logged in to favorite on posts!\");\r\n\r\n\tif (!Post.favoriting[post_id]) {\r\n\t\tPost.favoriting[post_id] = true;\r\n\t\t\r\n\t\tif (favorited)\r\n\t\t\treturn openModal(\r\n\t\t\t\t<div className=\"ClipboardModal\" style={{ minHeight: \"22%\" }}>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\tDue to an issue with e621's API, you are currently unable to unfavorite posts from this website.\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\tAlternatively, you can click <a href={\"https://e621.net/posts/\" + post_id}>this link</a> to unfavorite it on the vanilla site.\r\n\t\t\t\t\t\t<br/><br/>\r\n\t\t\t\t\t\tI apologize for the incovenience, this issue will be fixed in a later update.\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t\t// await fetch(API.endpoint(\"favorites/\" + post_id), { method: \"DELETE\" });\r\n\t\telse\r\n\t\t\tawait fetch(API.endpoint(\"favorites\", { post_id }), { method: \"POST\" });\r\n\r\n\t\tToasts.showToast(\"Favorited post #\" + post_id);\r\n\r\n\t\tdelete Post.favoriting[post_id];\r\n\t\treturn { favorited: !favorited };\r\n\t}\r\n\telse\r\n\t\tToasts.showToast(\"Failed to favorite! Please try again.\", \"Failure\");\r\n}","import React from \"react\";\r\nimport App from \"../App\";\r\nimport { API, getPageArgs, Query, setPageArgs } from \"../Constants\";\r\nimport Post from \"./Post\";\r\nimport \"./PostList.scss\";\r\nimport SearchBar from \"./SearchBar\";\r\nimport Spinner from \"../Icons/Spinner.svg\";\r\nimport { openModal } from \"./Modals\";\r\nimport PostModal from \"./PostModal\";\r\nimport InlineLoading from \"./InlineLoading\";\r\n\r\nlet lastTags;\r\n\r\nexport default class PostList extends React.Component {\r\n\tcurrentPage = 1;\r\n\tstate = { posts: [], fetch: true, switchingPages: false, order: \"\" };\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.componentDidUpdate();\r\n\r\n\t\tPostList.instance = this;\r\n\r\n\t\tdocument.addEventListener(\"scroll\", this.docScrollEv);\r\n\r\n\t\tif (Query.get(\"post\"))\r\n\t\t\tthis.openPostModalForId(Query.get(\"post\"));\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.removeEventListener(\"scroll\", this.docScrollEv);\r\n\t}\r\n\r\n\tdocScrollEv = () => {\r\n\t\tconst footer = document.getElementsByClassName(\"Footer\")[0];\r\n\t\t\r\n\t\tif (footer.getBoundingClientRect().bottom <= window.innerHeight && this.state.posts.length > 0) {\r\n\t\t\tthis.loadPage(this.currentPage + 1);\r\n\t\t}\r\n\r\n\t\t// const header = document.getElementsByClassName(\"Header\")[0];\r\n\r\n\t\t// if (header.getBoundingClientRect().top <= 0 && this.currentPage > 1) {\r\n\t\t// \tthis.loadPage(this.currentPage - 1, false);\r\n\t\t// }\r\n\t};\r\n\r\n\tasync openPostModalForId(id) {\r\n\t\tconst res = await fetch(API.endpoint(\"posts/\" + id));\r\n\t\tconst { post } = await res.json();\r\n\r\n\t\topenModal(<PostModal {...post}/>);\r\n\t}\r\n\r\n\tgetTags() {\r\n\t\treturn (!this.props.tags ? \"\" : this.props.tags + \" \") + getPageArgs(\"search\")\r\n\t\t\t+ (App.settings.blacklist || []).map(tag => \" -\" + tag.split(\" \").join(\" -\")).join(\" \") + (this.state.order?.length ? ` ${this.state.order}` : \"\");\r\n\t}\r\n\r\n\tasync componentDidUpdate() {\r\n\t\tlet tags = getPageArgs(\"search\");\r\n\t\tconst page = parseInt(Query.get(\"page\")) || 1;\r\n\t\tconst bar = document.getElementsByClassName(\"SearchBar\")[0];\r\n\r\n\t\tif (tags === \"page\")\r\n\t\t\ttags = \"\";\r\n\r\n\t\tif (bar) {\r\n\t\t\tbar.textContent = tags;\r\n\t\t\t\r\n\t\t\tif (tags.length > 0) {\r\n\t\t\t\tbar.parentElement.classList.add(\"Focused\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.state.fetch || (lastTags !== tags && lastTags)) {\r\n\t\t\tSearchBar.instance.setState({ searching: true });\r\n\t\t\tlastTags = tags;\r\n\t\t\tdocument.title = \"Searching...\";\r\n\r\n\t\t\tthis.currentPage = 1;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tthis.currentPage = page;\r\n\r\n\t\t\t\tconst res = await fetch(API.endpoint(this.props.endpoint || \"posts\", this.props.endpointArgs || { tags: this.getTags(), page }));\r\n\t\t\t\tconst posts = (await res.json()).posts || [];\r\n\t\r\n\t\t\t\tthis.setState({ posts, fetch: false });\r\n\t\t\t\tSearchBar.instance.setState({ searching: false });\r\n\r\n\t\t\t\tswitch (this.props.endpoint)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"favorites\":\r\n\t\t\t\t\t\tdocument.title = \"Favorited | Sucralose!\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tdocument.title = tags + \" | Sucralose!\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync loadPage(to, append = true) {\r\n\t\tthis.setState({ switchingPages: true });\r\n\r\n\t\tlet lastValidPage = this.currentPage;\r\n\r\n\t\tfor (let page = this.currentPage + 1; page <= to; page++) {\r\n\t\t\tthis.currentPage = page;\r\n\t\t\t\r\n\t\t\tconst res = await fetch(API.endpoint(this.props.endpoint || \"posts\", Object.assign(this.props.endpointArgs || { tags: this.getTags() }, { page })));\r\n\t\t\tconst posts = (await res.json()).posts;\r\n\t\r\n\t\t\tconst cache = this.state.posts;\r\n\t\t\tcache[append ? \"push\" : \"unshift\"](...posts);\r\n\t\t\t\r\n\t\t\tif (posts.length > 0)\r\n\t\t\t\tlastValidPage = page;\r\n\t\r\n\t\t\tthis.setState({ posts: cache, fetch: false });\r\n\t\t}\r\n\r\n\t\tthis.currentPage = lastValidPage;\r\n\r\n\t\tthis.setState({ switchingPages: false });\r\n\t\tQuery.set(\"page\", this.currentPage);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"PostList\">\r\n\t\t\t\t{ [...this.state.posts]\r\n\t\t\t\t\t.filter(post => post.file.url)\r\n\t\t\t\t\t.map(post => (<Post key={post.id} {...post}/>)) }\r\n\t\t\t\t{ this.state.fetch || this.state.switchingPages ? (\r\n\t\t\t\t\t<div className=\"PostListFetchingOverlay\">\r\n\t\t\t\t\t\t<InlineLoading/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport \"./TabsList.scss\";\r\n\r\nexport default class extends React.Component {\r\n\tstate = { active: null };\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ active: this.props.tabs[0] });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst children = React.Children.toArray(this.props.children);\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"TabsList\">\r\n\t\t\t\t\t{ this.props.tabs.map(title => (\r\n\t\t\t\t\t\t<span key={title} className={\"TabItem\" + (title === this.state.active ? \" Active\" : \"\")} onClick={() => {\r\n\t\t\t\t\t\t\tthis.setState({ active: title });\r\n\r\n\t\t\t\t\t\t\tif (this.props.onChange) {\r\n\t\t\t\t\t\t\t\tthis.props.onChange(title, this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<span className=\"TabItemTitle\">{ title }</span>\r\n\t\t\t\t\t\t\t<div className=\"TabItemBorder\"></div>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)) }\r\n\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t{ children.find(c => c.props.tab === this.state.active) }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport { API, url } from \"../Constants\";\r\nimport LinkWrapper from \"./LinkWrapper\";\r\nimport \"./PostCommentList.scss\";\r\n\r\nexport default class extends React.Component {\r\n\tinterval;\r\n\tstate = { comments: [] };\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.interval = setInterval(() => this.refresh(), 10000);\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\tasync refresh() {\r\n\t\tconst res = await fetch(API.endpoint(\"posts/\" + this.props.post.id + \"/comments\"));\r\n\t\tconst data = await res.json();\r\n\t\tconst doc = new DOMParser().parseFromString(data.html, \"text/html\");\r\n\t\tconst comments = [];\r\n\r\n\t\tfor (let com of doc.getElementsByClassName(\"comment\")) {\r\n\t\t\tconst avatar = com.getElementsByClassName(\"avatar\")[0].children[0];\r\n\r\n\t\t\tcomments.push({\r\n\t\t\t\tid: com.attributes[\"data-comment-id\"].nodeValue,\r\n\t\t\t\tuser: com.attributes[\"data-creator-id\"].nodeValue,\r\n\t\t\t\tusername: (com.getElementsByClassName(\"user-member\")[0] || { innerText: \"Unknown User\" }).innerText.trim(),\r\n\t\t\t\tbody: com.getElementsByClassName(\"body styled-dtext\")[0].innerHTML.trim(),\r\n\t\t\t\tavatar: data.posts[avatar === null ? null : avatar.attributes[\"data-id\"].nodeValue],\r\n\t\t\t\ttimestamp: com.getElementsByTagName(\"time\")[0].innerText\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setState({ comments });\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.interval);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"Comments\">\r\n\t\t\t\t{ this.state.comments.map(comment => (\r\n\t\t\t\t\t<div className=\"Comment\" key={comment.id}>\r\n\t\t\t\t\t\t{ comment.avatar === null || comment.avatar.preview_url === null ? (<div className=\"Avatar Placeholder\"/>) : (\r\n\t\t\t\t\t\t\t<LinkWrapper href={\"#/post/\" + comment.avatar.id}>\r\n\t\t\t\t\t\t\t\t<div className=\"Avatar\" style={{\r\n\t\t\t\t\t\t\t\t\tbackgroundImage: url(comment.avatar.preview_url)\r\n\t\t\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t\t\t</LinkWrapper>\r\n\t\t\t\t\t\t) }\r\n\r\n\t\t\t\t\t\t<div className=\"Inner\">\r\n\t\t\t\t\t\t\t<LinkWrapper href={\"#/user/\" + comment.user}>\r\n\t\t\t\t\t\t\t\t<span className=\"Username\">\r\n\t\t\t\t\t\t\t\t\t{ comment.username }\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</LinkWrapper>\r\n\t\t\t\t\t\t\t<span className=\"Timestamp\">\r\n\t\t\t\t\t\t\t\t{ comment.timestamp }\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t<div className=\"Content\" dangerouslySetInnerHTML={{ __html: comment.body }}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)) }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport TabsList from \"../Components/TabsList\";\r\nimport PostTagsList from \"../Components/PostTagsList\";\r\nimport { API, bytesToString, download, getPageArgs, url } from \"../Constants\";\r\nimport \"./Post.scss\";\r\nimport PostCommentList from \"../Components/PostCommentList\";\r\nimport ContextMenu from \"../Components/ContextMenuHandler\";\r\nimport Post, { PostContextMenu } from \"../Components/Post\";\r\n\r\n/* Todo\r\n\tHandle null post.\r\n*/\r\n\r\nclass InfoItem extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"InfoItem\">\r\n\t\t\t\t<span className=\"ILabel\">{ this.props.label }</span>\r\n\t\t\t\t{ this.props.content === null ? null : (<span className=\"IContent\">{ this.props.content }</span>) }\r\n\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default class extends React.Component {\r\n\tid;\r\n\tstate = { post: null, ready: false, selfScore: 0 };\r\n\r\n\tasync componentDidMount() {\r\n\t\tconst id = this.id = getPageArgs(\"post\");\r\n\r\n\t\tdocument.title = `#${id} | Sucralose!`;\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await fetch(API.endpoint(\"posts/\" + id));\r\n\t\t\tconst post = (await res.json()).post;\r\n\r\n\t\t\tif (post)\r\n\t\t\t\tthis.setState({ post, ready: true });\r\n\t\t\telse\r\n\t\t\t\tthis.setState({ ready: false });\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t\tthis.setState({ ready: true });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.id !== getPageArgs(\"post\")) {\r\n\t\t\tthis.componentDidMount();\r\n\r\n\t\t\tthis.id = getPageArgs(\"post\");\r\n\t\t}\r\n\t}\r\n\r\n\tformatSource(source) {\r\n\t\treturn source.split(/(http|https):\\/\\//)[2].replace(\"www.\", \"\").split(\".\")[0];\r\n\t}\r\n\r\n\tasync vote(vote) {\r\n\t\tthis.setState({ selfScore: (await Post.vote(this.state.post.id, vote)).selfScore });\r\n\t}\r\n\r\n\tasync favorite() {\r\n\t\tthis.state.post.is_favorited = await Post.favorite(this.state.post.id, this.state.post.is_favorited);\r\n\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { post } = this.state;\r\n\r\n\t\tconst commentLabel = post === null ? \"Comments\" : `Comments (${post.comment_count})`;\r\n\r\n\t\tlet contentView;\r\n\r\n\t\tif (post && post.file) {\r\n\t\t\tswitch (post.file.ext) {\r\n\t\t\t\tcase \"webm\":\r\n\t\t\t\t\tcontentView = (\r\n\t\t\t\t\t\t<video controls className=\"Image Video\">\r\n\t\t\t\t\t\t\t<source src={post.file.url} type=\"video/webm\"/>\r\n\t\t\t\t\t\t</video>\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcontentView = (<div className=\"Image\" style={{ backgroundImage: url(post.file.url) }}/>);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"PostPage\">\r\n\t\t\t\t{ this.state.ready && post && post.file && post.file.url ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<ContextMenu.Wrapper menu={<PostContextMenu {...post}/>}>\r\n\t\t\t\t\t\t\t{ contentView }\r\n\t\t\t\t\t\t</ContextMenu.Wrapper>\r\n\r\n\t\t\t\t\t\t<div className=\"PostButtonList\">\r\n\t\t\t\t\t\t\t<div className=\"Button\" onClick={() => download(post.file.url)}>Download</div>\r\n\t\t\t\t\t\t\t<div className=\"Votes\">\r\n\t\t\t\t\t\t\t\t<div className={\"Button\" + (this.state.selfScore > 0 ? \" Voted\" : \"\")} onClick={() => this.vote(1)}>🔼 Upvote ({ post.score.up })</div>\r\n\t\t\t\t\t\t\t\t<div className={\"Button\" + (this.state.selfScore < 0 ? \" Voted\" : \"\")} onClick={() => this.vote(-1)}>🔽 Downvote ({ -post.score.down })</div>\r\n\t\t\t\t\t\t\t\t<div className={\"Button\" + (post.is_favorited ? \" Voted\" : \"\")} onClick={() => this.favorite()}>💙 Favorite ({ post.fav_count })</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{ post.description && post.description.trim().length > 0 ? (\r\n\t\t\t\t\t\t\t<div className=\"DescriptionContainer\">\r\n\t\t\t\t\t\t\t\t<div className=\"Description\" dangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t__html: post.description\r\n\t\t\t\t\t\t\t\t\t\t.replace(/http(\\S*)/gmi, link => `<a href=\"${link}\">${link}</a>`)\r\n\t\t\t\t\t\t\t\t\t\t.split(\"\\n\").join(\"<br/>\")\r\n\t\t\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : null }\r\n\r\n\t\t\t\t\t\t<TabsList tabs={[\"Tags\", commentLabel, \"Info\"]}>\r\n\t\t\t\t\t\t\t<PostTagsList tab=\"Tags\" tags={post.tags}/>\r\n\t\t\t\t\t\t\t<PostCommentList tab={commentLabel} post={post}/>\r\n\t\t\t\t\t\t\t<div tab=\"Info\" className=\"InfoTab\">\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Post ID: \" content={\"#\" + post.id}/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Post MD5: \" content={post.file.md5}/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Created at: \" content={new Date(post.created_at).toLocaleDateString() + \", \" + new Date(post.created_at).toLocaleTimeString()}/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Size: \" content={bytesToString(post.file.size)}/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Width: \" content={post.file.width + \" pixels\"}/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Height: \" content={post.file.height + \" pixels\"}/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"File extension: \" content={post.file.ext.toUpperCase()}/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Flags: \" content={\r\n\t\t\t\t\t\t\t\t\tObject.values(post.flags).filter(f => f).length > 0\r\n\t\t\t\t\t\t\t\t\t\t? Object.keys(post.flags).filter(f => post.flags[f]).join(\", \")\r\n\t\t\t\t\t\t\t\t\t\t: \"none\" }/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Rating: \" content={post.rating === \"e\" ? \"explicit\" : post.rating === \"q\" ? \"questionable\" : \"safe\"}/>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Sources: \">{ \r\n\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t\t\t\t\t{ post.sources.map(source =>\r\n\t\t\t\t\t\t\t\t\t\t\t(<a key={source} href={source} style={{ textTransform: \"capitalize\" }}>{ this.formatSource(source) }</a>)) }\r\n\t\t\t\t\t\t\t\t\t</div> }</InfoItem>\r\n\t\t\t\t\t\t\t\t<InfoItem label=\"Uploader: \"> <a href={\"#/user/\" + post.uploader_id}>{ post.uploader_id }</a> </InfoItem>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</TabsList>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import React, { createRef } from \"react\";\r\nimport App from \"../App\";\r\nimport { API, formatCamelCase, Serializer } from \"../Constants\";\r\nimport \"./Settings.scss\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport _ from \"lodash\";\r\n\r\nclass List extends React.Component {\r\n\tstate = { items: [], localUserId: \"pending\" };\r\n\taddFieldRef = createRef();\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ items: this.props.items });\r\n\r\n\t\t// API.fetchLocalUserId().then(id => this.fetchUserSettings(id));\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.props.onChange) {\r\n\t\t\tthis.props.onChange(this.state.items);\r\n\t\t}\r\n\t}\r\n\r\n\tadd() {\r\n\t\tif (this.addFieldRef.current === null || this.addFieldRef.current.value.trim().length === 0)\r\n\t\t\treturn;\r\n\r\n\t\tconst items = [...this.state.items];\r\n\r\n\t\tif (this.props.split) {\r\n\t\t\tfor (let s of this.addFieldRef.current.value.split(\" \")) {\r\n\t\t\t\tif (!items.includes(s) && s) {\r\n\t\t\t\t\titems.push(s);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (!items.includes(this.addFieldRef.current.value) && this.addFieldRef.current.value)\r\n\t\t\titems.push(this.addFieldRef.current.value);\r\n\t\t\r\n\t\tthis.addFieldRef.current.value = \"\";\r\n\r\n\t\tthis.setState({ items });\r\n\t}\r\n\r\n\tremove(index) {\r\n\t\tconst items = [...this.state.items];\r\n\r\n\t\titems.splice(index, 1);\r\n\r\n\t\tthis.setState({ items });\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"SList\">\r\n\t\t\t\t<div className=\"SListTitle\">\r\n\t\t\t\t\t{ this.props.title }\r\n\t\t\t\t\t{ this.props.note ? (\r\n\t\t\t\t\t<div className=\"SListNote\">\r\n\t\t\t\t\t\t{ this.props.note }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null }\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"SListItems TagsList\">\r\n\t\t\t\t\t{ this.state.items === null || this.state.items.length === 0 ? (\r\n\t\t\t\t\t\t<div className=\"SListPlaceholder\">\r\n\t\t\t\t\t\t\tNo items found.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : this.state.items.map(item => (\r\n\t\t\t\t\t\t<div key={this.state.items.indexOf(item)} className=\"SListItem\">\r\n\t\t\t\t\t\t\t<div className=\"Entry\">\r\n\t\t\t\t\t\t\t\t{ item }\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faTimes} className=\"XButton\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t onClick={this.remove.bind(this, this.state.items.indexOf(item))}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)) }\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"SListControls\">\r\n\t\t\t\t\t<input ref={this.addFieldRef} onKeyDown={e => { if (e.key === \"Enter\") this.add(); }} className=\"SListControl\" placeholder={this.props.placeholder}/>\r\n\t\t\t\t\t<div className=\"SListControl\" onClick={() => this.add()}>Add</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default class Settings extends React.Component {\r\n\tstatic defaults = {\r\n\t\tcolors: {\r\n\t\t\tprimary: {\r\n\t\t\t\ttype: \"color\",\r\n\t\t\t\tvalue: \"#8fbcbb\"\r\n\t\t\t},\r\n\t\t\tsecondary: {\r\n\t\t\t\ttype: \"color\",\r\n\t\t\t\tvalue: \"#88c0d0\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tbackgroundColors: {\r\n\t\t\tprimary: {\r\n\t\t\t\ttype: \"color\",\r\n\t\t\t\tvalue: \"#2e3440\"\r\n\t\t\t},\r\n\t\t\tsecondary: {\r\n\t\t\t\ttype: \"color\",\r\n\t\t\t\tvalue: \"#3b4252\"\r\n\t\t\t},\r\n\t\t\ttertiary: {\r\n\t\t\t\ttype: \"color\",\r\n\t\t\t\tvalue: \"#434c5e\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tborderRadius: {\r\n\t\t\tprimary: {\r\n\t\t\t\ttype: \"slider\",\r\n\t\t\t\tmin: 0, max: 50,\r\n\t\t\t\tvalue: 4\r\n\t\t\t},\r\n\t\t\tsecondary: {\r\n\t\t\t\ttype: \"slider\",\r\n\t\t\t\tmin: 0, max: 50,\r\n\t\t\t\tvalue: 7\r\n\t\t\t}\r\n\t\t},\r\n\t\tposts: {\r\n\t\t\tcolumnCount: {\r\n\t\t\t\ttype: \"slider\",\r\n\t\t\t\tmin: 1, max: 15,\r\n\t\t\t\tvalue: 7\r\n\t\t\t},\r\n\t\t\tmobileColumnCount: {\r\n\t\t\t\ttype: \"slider\",\r\n\t\t\t\tmin: 1, max: 7,\r\n\t\t\t\tvalue: 2\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tstatic props = _.merge(this.defaults, Serializer.load(\"settingsProps\"));\r\n\t\r\n\tstatic save() {\r\n\t\tconst serializable = {};\r\n\t\t\r\n\t\t// This is spaghetti and no one should ever do it, therefore I'm going to do it\r\n\t\tfor (const cat in this.defaults) {\r\n\t\t\tfor (const setting in this.defaults[cat]) {\r\n\t\t\t\t_.set(serializable, [cat, setting, \"value\"].join(\".\"), this.props[cat][setting].value);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tconst fuck = Serializer.load(\"settings\");\r\n\t\t\r\n\t\tSerializer.save(\"settingsProps\", serializable);\r\n\t\tSettingsRenderer.forceUpdate?.();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"SettingsPage\">\r\n\t\t\t\t<div className=\"SHeader\">e621 Settings</div>\r\n\t\t\t\t<div className=\"SItems\">\r\n\t\t\t\t\t<div style={{ textAlign: \"center\", fontSize: \"1.5rem\", opacity: 0.5 }}>Currently unavailable.</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"SHeader\">Sucralose Settings</div>\r\n\t\t\t\t<div className=\"SItems\">\r\n\t\t\t\t\t{ Object.keys(Settings.props).map(cat => (\r\n\t\t\t\t\t\t<div className=\"SList\" key={cat}>\r\n\t\t\t\t\t\t\t<div className=\"SListTitle\">{formatCamelCase(cat)}</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div className=\"SListItems\">\r\n\t\t\t\t\t\t\t\t{ Object.entries(Settings.props[cat]).map(([key, setting]) =>\r\n\t\t\t\t\t\t\t\t\t<SettingField key={key} name={key} setting={setting}\r\n\t\t\t\t\t\t\t\t\t\t\t\t  callback={val => (Settings.props[cat][key].value = val, Settings.save())}/>) }\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)) }\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"SItems\">\r\n\t\t\t\t\t<List title=\"Subscribed Tag Sets\" items={App.settings.subscriptions} placeholder=\"Examples: some_artist | braeburned | rating:e score:>100\"\r\n\t\t\t\t\t\tonChange={r => { App.settings.subscriptions = r; App.saveSettings(); }}\r\n\t\t\t\t\t\tnote=\"NOTE: Due to e621 API limitations, multi-tag subscriptions will not be displayed on your home page. Example: 'rating:s score>100'\"/>\r\n\t\t\t\t\t<List split title=\"Blacklisted Tag Sets\" items={App.settings.blacklist} placeholder=\"Examples: intersex | score:<0 | rating:e rating:q\"\r\n\t\t\t\t\t\tonChange={r => { App.settings.blacklist = r; App.saveSettings(); }}/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"SSerializers\">\r\n\t\t\t\t\t<div className=\"Button\" onClick={() => App.importSettings()}>Import Settings</div>\r\n\t\t\t\t\t<div className=\"Button\" onClick={() => App.exportSettings()}>Export Settings</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport function SettingField({ name, setting, callback }) {\r\n\tconst [value, setValueState] = React.useState(setting.value);\r\n\tconst setState = newVal => (callback?.(newVal), setValueState(newVal));\r\n\r\n\tswitch (setting.type) {\r\n\t\tdefault: return null;\r\n\r\n\t\tcase \"color\": return (\r\n\t\t\t<div className=\"SListItem\">\r\n\t\t\t\t<div className=\"EntryTitle\">{formatCamelCase(name)}</div>\r\n\r\n\t\t\t\t<span className=\"ColorPreview\" style={{ backgroundColor: value }}/>\r\n\t\t\t\t<input className=\"Entry ColorField\" defaultValue={value}\r\n\t\t\t\t\t   onInput={e => setState(e.currentTarget.value)}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t\t\r\n\t\tcase \"slider\": return (\r\n\t\t\t<div className=\"SListItem\">\r\n\t\t\t\t<div className=\"EntryTitle\">{formatCamelCase(name)} - {value}</div>\r\n\t\t\t\t\r\n\t\t\t\t<input className=\"Entry SliderField\" defaultValue={value}\r\n\t\t\t\t\t   type=\"range\"\r\n\t\t\t\t\t   onInput={e => setState(e.currentTarget.value)}\r\n\t\t\t\t\t   min={setting.min} max={setting.max}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport function SettingsRenderer() {\r\n\tconst [, forceUpdate] = React.useReducer(x => x + 1, 0);\r\n\tSettingsRenderer.forceUpdate = forceUpdate;\r\n\t\r\n\tconst { props } = Settings;\r\n\t\r\n\treturn (\r\n\t\t<style>\r\n\t\t{`\r\n\t\t\t:root {\r\n\t\t\t\t--primary-color: ${props.colors.primary.value};\r\n\t\t\t\t--secondary-color: ${props.colors.secondary.value};\r\n\t\t\t\t\r\n\t\t\t\t--primary-bg: ${props.backgroundColors.primary.value};\r\n\t\t\t\t--secondary-bg: ${props.backgroundColors.secondary.value};\r\n\t\t\t\t--tertiary-bg: ${props.backgroundColors.tertiary.value};\r\n\t\t\t\t\r\n\t\t\t\t--primary-border-radius: ${props.borderRadius.primary.value}px;\r\n\t\t\t\t--secondary-border-radius: ${props.borderRadius.secondary.value}px;\r\n\t\t\t\t\r\n\t\t\t\t--post-column-count: ${props.posts.columnCount.value};\r\n\t\t\t\t--mobile-post-column-count: ${props.posts.mobileColumnCount.value};\r\n\t\t\t}\r\n\t\t`}\r\n\t\t</style>\r\n\t);\r\n}","import React from \"react\";\r\nimport App from \"../App\";\r\nimport ContextMenu from \"../Components/ContextMenuHandler\";\r\nimport LinkWrapper from \"../Components/LinkWrapper\";\r\nimport { PostTagContextMenu } from \"../Components/PostTagsList\";\r\nimport TabsList from \"../Components/TabsList\";\r\nimport { API } from \"../Constants\";\r\nimport \"./Sets.scss\";\r\n\r\nexport default class SetsPage extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"SetsPage\">\r\n\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass Field extends React.Component {\r\n\thandleKeyDown = e => {\r\n\t\tif (!this.props.multiline && e.key === \"Enter\") {\r\n\t\t\treturn e.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\thandleInput = e => {\r\n\t\tthis.props.owner[this.props.id] = e.target.textContent;\r\n\r\n\t\tif (this.props.callback && this.props.callback(e))\r\n\t\t\treturn e.preventDefault();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"Field\">\r\n\t\t\t\t<div className=\"FTitle\">{ this.props.title }</div>\r\n\t\t\t\t{ this.props.note ? (<div className=\"FNote\">{ this.props.note }</div>) : null }\r\n\t\t\t\t{ this.props.importantNote ? (<div className=\"FNote Important\">{ this.props.importantNote }</div>) : null }\r\n\t\t\t\t<div id={\"err-note-\" + this.props.id} className=\"FNote Error\"/>\r\n\t\t\t\t<div contentEditable className=\"Input\" style={this.props.multiline ? { height: 300 } : null} onKeyDown={this.handleKeyDown} onInput={this.handleInput}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSetsPage.CreatePage = class extends React.Component {\r\n\tname = \"\";\r\n\tshortname = \"\";\r\n\tdescription = \"\";\r\n\tpublic = false;\r\n\ttransferOnDelete = false;\r\n\r\n\tasync post() {\r\n\t\tfor (let err of document.getElementsByClassName(\"Error\")) {\r\n\t\t\terr.innerHTML = \"\";\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await fetch(API.endpoint(\"post_sets\", {\r\n\t\t\t\t\"post_set[name]\": this.name.split(\" \").join(\"+\"),\r\n\t\t\t\t\"post_set[shortname]\": this.shortname,\r\n\t\t\t\t\"post_set[description]\": this.description,\r\n\t\t\t\t\"post_set[is_public]\": this.public ? 1 : 0,\r\n\t\t\t\t\"post_set[transfer_on_delete]\": this.transferOnDelete ? 1 : 0,\r\n\t\t\t\t\"commit\": \"Create\"\r\n\t\t\t}), { method: \"POST\" });\r\n\t\t\tconst data = await res.json();\r\n\r\n\t\t\tconsole.log(data);\r\n\r\n\t\t\tif (data.errors) {\r\n\t\t\t\tfor (let id in data.errors) {\r\n\t\t\t\t\tconst note = document.getElementById(\"err-note-\" + id);\r\n\r\n\t\t\t\t\tif (note && data.errors[id]) {\r\n\t\t\t\t\t\tnote.innerHTML = data.errors[id].map(err => \"ERROR: \" + err).join(\"<br/>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tApp.postSets.push(data);\r\n\t\t\t\twindow.location.assign(\"#/set/\" + data.id);\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"SetsPage CreatePage\">\r\n\t\t\t\t<div className=\"Fields\">\r\n\t\t\t\t\t<Field owner={this} id=\"name\" title=\"Display Name\" note=\"Must be unique. There can only be one of each name.\"/>\r\n\t\t\t\t\t<Field owner={this} id=\"shortname\" title=\"ID/Short Name\" note=\"This is the set's metatag name. This will be used to find your set.\"\r\n\t\t\t\t\t\timportantNote=\"NOTE: Can only contain letters, numbers, and underscores and must contain at least one letter or underscore.\"/>\r\n\t\t\t\t\t<Field owner={this} id=\"description\" multiline title=\"Description\"/>\r\n\r\n\t\t\t\t\t<div className=\"Button\" onClick={() => this.post()}>Create Set</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class SetItemContextMenu extends React.Component {\r\n\trender() {\r\n\t\tconst { id, creator_id } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<ContextMenu>\r\n\t\t\t\t<LinkWrapper href={\"#/search/set:\" + id}>\r\n\t\t\t\t\t<ContextMenu.Item>View Posts</ContextMenu.Item>\r\n\t\t\t\t</LinkWrapper>\r\n\r\n\t\t\t\t<ContextMenu.Divider/>\r\n\r\n\t\t\t\t<PostTagContextMenu tag={\"set:\" + id}/>\r\n\r\n\t\t\t\t{/* { creator_id === App.localUserId ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<ContextMenu.Divider/>\r\n\r\n\t\t\t\t\t\t<ContextMenu.Item style={{ color: \"#ff0000\" }} autoClose onClick={async () => {\r\n\t\t\t\t\t\t\tconst res = await fetch(API.endpoint(\"post_sets/\" + id, {}, true), { method: \"POST\", body: JSON.stringify({ _method: \"delete\" }) });\r\n\t\t\t\t\t\t\tconst msg = await res.text();\r\n\r\n\t\t\t\t\t\t\tconsole.log(msg);\r\n\t\t\t\t\t\t\tApp.showNotice(\"Successfully deleted set!\");\r\n\t\t\t\t\t\t\tSetsPage.MainPage.instance.initMySets();\r\n\t\t\t\t\t\t}}>Delete Set</ContextMenu.Item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null } */}\r\n\t\t\t</ContextMenu>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass Item extends React.Component {\r\n\trender() {\r\n\t\tconst { id, name, shortname, creator_id, description, updated_at, post_count } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<ContextMenu.Wrapper menu={<SetItemContextMenu {...this.props}/>}>\r\n\t\t\t\t<LinkWrapper href={\"#/search/set:\" + id}>\r\n\t\t\t\t\t<div className=\"SetItem\">\r\n\t\t\t\t\t\t<div className=\"STitle\">\r\n\t\t\t\t\t\t\t{ name },\r\n\t\t\t\t\t\t\t<LinkWrapper href={\"#/user/\" + creator_id}>\r\n\t\t\t\t\t\t\t\t<span className=\"SCreator\">\r\n\t\t\t\t\t\t\t\t\tcreated by { creator_id }\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</LinkWrapper>\r\n\t\t\t\t\t\t\t<span className=\"SDate\">\r\n\t\t\t\t\t\t\t\tUpdated at { new Date(updated_at).toDateString() }, { new Date(updated_at).toLocaleTimeString() }\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"SNote\">{ shortname }</div>\r\n\t\t\t\t\t\t<div className=\"SNote\">{ post_count } posts</div>\r\n\r\n\t\t\t\t\t\t{ description ? (<div className=\"SDesc\">{ description }</div>) : null }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</LinkWrapper>\r\n\t\t\t</ContextMenu.Wrapper>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nSetsPage.MainPage = class extends React.Component {\r\n\tpage = 1;\r\n\tlastValidPage = this.page;\r\n\tstate = { items: [], mySets: [], subscribedSets: [] };\r\n\t\r\n\tdocScrollEv = () => {\r\n\t\tconst footer = document.getElementsByClassName(\"Footer\")[0];\r\n\r\n\t\tif (footer.getBoundingClientRect().bottom <= window.innerHeight && this.state.items.length > 0) {\r\n\t\t\tthis.loadPage(this.page + 1);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.addEventListener(\"scroll\", this.docScrollEv);\r\n\t\tdocument.title = \"Post Sets | Sucralose!\";\r\n\r\n\t\tthis.initSets();\r\n\t\tthis.initMySets();\r\n\r\n\t\tSetsPage.MainPage.instance = this;\r\n\t}\r\n\r\n\tasync initSets() {\r\n\t\tconst res = await fetch(API.endpoint(\"post_sets\"));\r\n\t\tconst items = await res.json();\r\n\t\t\r\n\t\tthis.setState({ items });\r\n\t}\r\n\r\n\tasync initMySets() {\r\n\t\tconst localUserId = await API.fetchLocalUserId();\r\n\t\tconst res = await fetch(API.endpoint(\"post_sets\", { \"search[creator_id]\": localUserId }));\r\n\t\tconst mySets = await res.json();\r\n\r\n\t\tthis.setState({ mySets });\r\n\t}\r\n\r\n\tasync initSubscribedSets() {\r\n\t\tconst sets = App.settings.subscriptions\r\n\t\t\t.filter(tag => tag.includes(\"set:\"))\r\n\t\t\t.map(tag => (/set:([0-9]*)/).exec(tag)[1])\r\n\t\t\t.filter(set => set && set.trim());\r\n\t\tconst subscribedSets = [];\r\n\t\t\r\n\t\tfor (const id of sets) {\r\n\t\t\tconst res = await fetch(API.endpoint(\"post_sets/\" + id));\r\n\t\t\tconst set = await res.json();\r\n\r\n\t\t\tsubscribedSets.push(set);\r\n\t\t\tthis.setState({ subscribedSets });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.removeEventListener(\"scroll\", this.docScrollEv);\r\n\t}\r\n\r\n\tasync loadPage(to, append = true) {\r\n\t\tfor (let page = this.page + 1; page <= to; page++) {\r\n\t\t\tthis.page = page;\r\n\r\n\t\t\tconst res = await fetch(API.endpoint(\"post_sets\", { page }));\r\n\t\t\tconst items = await res.json();\r\n\r\n\t\t\tconst cache = this.state.items;\r\n\t\t\tcache[append ? \"push\" : \"unshift\"](...items);\r\n\r\n\t\t\tif (cache.length > 0) {\r\n\t\t\t\tthis.lastValidPage = page;\r\n\r\n\t\t\t\tthis.setState({ items: cache });\r\n\t\t\t\tdocument.title = `Post Sets Page ${page} | Sucralose!`;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"SetsPage MainPage\">\r\n\t\t\t\t<TabsList tabs={[\"All Sets\", \"My Sets\", \"Subscribed Sets\"]} onChange={tab => {\r\n\t\t\t\t\tif (tab === \"Subscribed Sets\" && !this.state.subscribedSets.length) {\r\n\t\t\t\t\t\tthis.initSubscribedSets();\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<div tab=\"All Sets\">\r\n\t\t\t\t\t\t{ this.state.items.map(set => (<Item key={set.id} {...set}/>)) }\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div tab=\"My Sets\">\r\n\t\t\t\t\t\t{ this.state.mySets.map(set => (<Item key={set.id} {...set}/>)) }\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div tab=\"Subscribed Sets\">\r\n\t\t\t\t\t\t{ this.state.subscribedSets.map(set => (<Item key={set.id} {...set}/>)) }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</TabsList>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport Post from \"../Components/Post\";\r\nimport PostList from \"../Components/PostList\";\r\nimport TabsList from \"../Components/TabsList\";\r\nimport { API, getPageArgs } from \"../Constants\";\r\nimport \"./User.scss\";\r\n\r\nimport Spinner from \"../Icons/Spinner.svg\";\r\n\r\nexport default class extends React.Component {\r\n\tstate = { name: \"\", avatar: null, favCount: 0, postCount: 0, about: null };\r\n\r\n\tasync componentDidMount() {\r\n\t\tconst res = await fetch(API.endpoint(\"users/\" + getPageArgs(\"user\"), {}, true));\r\n\t\tconst doc = new DOMParser().parseFromString(await res.text(), \"text/html\");\r\n\r\n\t\tconst name = doc.getElementsByClassName(\"user-member\")[0].textContent;\r\n\t\tconst avatar = await this.parseAvatar(doc.getElementsByClassName(\"profile-avatar\")[0]);\r\n\t\tconst favCount = [...doc.getElementsByTagName(\"a\")].find(e => e.href.includes(\"/favorites\")).textContent;\r\n\t\tconst postCount = [...doc.getElementsByClassName(\"user-statistics\")[0].getElementsByTagName(\"a\")].find(e => e.href.includes(\"/posts\")).textContent;\r\n\t\tconst about = this.parseAboutInfo(doc.getElementsByClassName(\"about-section\")[0]);\r\n\r\n\t\tthis.setState({ name, avatar, favCount, postCount, about });\r\n\t}\r\n\r\n\tasync parseAvatar(avatar) {\r\n\t\tif (!avatar || !avatar.firstElementChild)\r\n\t\t\treturn null;\r\n\t\t\t\r\n\t\ttry {\r\n\t\t\tconst res = await fetch(API.endpoint(\"posts/\" + avatar.firstElementChild.dataset.id));\r\n\t\t\treturn await res.json();\r\n\t\t}\r\n\t\tcatch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tparseAboutInfo(section) {\r\n\t\tif (!section)\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\tconst [ content ] = section.getElementsByClassName(\"content\");\r\n\t\tif (content && content.firstElementChild)\r\n\t\t\treturn content.firstElementChild.textContent;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { name, avatar, favCount, postCount, about } = this.state;\r\n\r\n\t\tconst favorites = `Favorites (${favCount})`;\r\n\t\tconst posts = `Posts (${postCount})`;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"UserPage\">\r\n\t\t\t\t<div className=\"Head\">\r\n\t\t\t\t\t<div className=\"AvatarContainer\">\r\n\t\t\t\t\t\t{ avatar && avatar.post ? (<Post {...avatar.post}/>) : null }\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"Username\">{ name }</div>\r\n\t\t\t\t\t\t<div className=\"About\">{ about || \"\" }</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<TabsList tabs={[\"Info\", favorites, posts]}>\r\n\t\t\t\t\t<PostList tab={favorites} endpoint=\"favorites\" endpointArgs={{ user_id: getPageArgs(\"user\") }}/>\r\n\t\t\t\t\t<PostList tab={posts} tags={ \"user:\" + name.replace(/ /g, \"_\") }/>\r\n\t\t\t\t</TabsList>\r\n\r\n\t\t\t\t{ !name ? (\r\n\t\t\t\t\t<div className=\"PostListFetchingOverlay\">\r\n\t\t\t\t\t\t<img src={Spinner} className=\"Spinner\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n};","export default __webpack_public_path__ + \"static/media/Sidebar.e8db7520.svg\";","export default class EventListener {\r\n    listeners = {};\r\n    options = {};\r\n    \r\n    subscribe(eventName, event, options) {\r\n        if (!this.listeners[eventName])\r\n            this.listeners[eventName] = [];\r\n        \r\n        if (~this.listeners[eventName].indexOf(event))\r\n            return console.error(`Cannot subscribe to event \"${eventName}\"! Already subscribed.`, event);\r\n        \r\n        this.listeners[eventName].push(event);\r\n        if (options)\r\n            this.options[event] = options;\r\n    }\r\n    \r\n    unsubscribe(eventName, event) {\r\n        if (!this.listeners[eventName])\r\n            this.listeners[eventName] = [];\r\n\r\n        const index = this.listeners[eventName].indexOf(event);\r\n        \r\n        if (this.options[event])\r\n            delete this.options[event];\r\n        \r\n        if (~index)\r\n            this.listeners[eventName].splice(index, 1);\r\n        else\r\n            console.warn(`Cannot unsubscribe to event \"${eventName}\"! Not subscribed.`, event);\r\n    }\r\n    \r\n    getOptionsFor(event) {\r\n        return Object.assign({\r\n            priority: 0\r\n        }, this.options[event] || {});\r\n    }\r\n    \r\n    invoke(eventName, ...args) {\r\n        if (!this.listeners[eventName])\r\n            this.listeners[eventName] = [];\r\n\r\n        this.listeners[eventName].sort((a, b) => this.getOptionsFor(a).priority - this.getOptionsFor(b)).every(event => {\r\n            try {\r\n                if (event(...args) === true) {\r\n                    return false;\r\n                }\r\n            }\r\n            catch (e) {\r\n                console.error(`Event listener failed to invoke \"${eventName}\"!`, event, e);\r\n            }\r\n            \r\n            return true;\r\n        });\r\n    }\r\n};","import React, { createRef, useEffect } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport \"./App.scss\";\nimport Dropdown from \"./Components/Dropdown\";\nimport { closeModal, Modals, openModal } from \"./Components/Modals\";\nimport PostList from \"./Components/PostList\";\nimport SearchBar from \"./Components/SearchBar\";\nimport { API, getPageArgs, getSiteBase, Order, Serializer } from \"./Constants\";\n\nimport PostPage from \"./Pages/Post\";\nimport SettingsPage, { SettingsRenderer } from \"./Pages/Settings\";\nimport SetsPage from \"./Pages/Sets\";\nimport UserPage from \"./Pages/User\";\n\nimport SidebarIcon from \"./Icons/Sidebar.svg\";\nimport Toasts from \"./Components/Toasts\";\nimport LinkWrapper from \"./Components/LinkWrapper\";\nimport EventListener from \"./EventListener\";\nimport PostModal from \"./Components/PostModal\";\nimport {\n\tfaBell,\n\tfaChartLine,\n\tfaCog,\n\tfaHeart,\n\tfaHistory,\n\tfaLayerGroup,\n\tfaUser\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport ContextMenu from \"./Components/ContextMenuHandler\";\n\n/*\n\tTODO finish user page\n\tTODO add pool functionality\n\tTODO visited posts history page\n */\n\nclass Sidebar extends React.Component {\n\tstate = { open: false };\n\n\tcomponentDidMount() {\n\t\tSidebar.instance = this;\n\t}\n\n\ttoggle() {\n\t\tthis.setState({ open: !this.state.open });\n\n\t\tif (this.state.open)\n\t\t\tSidebar.buttonRef.current.classList.remove(\"Open\");\n\t\telse\n\t\t\tSidebar.buttonRef.current.classList.add(\"Open\");\n\t}\n\t\n\tSidebarButton({ href, icon, children, onClick }) {\n\t\treturn (\n\t\t\t<LinkWrapper href={href} onClick={onClick}>\n\t\t\t\t<div className=\"SidebarButton\">\n\t\t\t\t\t<FontAwesomeIcon icon={icon} className=\"Icon\"/>\n\t\t\t\t\t\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t\t</LinkWrapper>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={\"SidebarContainer\" + (this.state.open ? \" Open\" : \"\")} onClick={e => { if (e.target === e.currentTarget) this.toggle(); }}>\n\t\t\t\t<div className=\"Sidebar\">\n\t\t\t\t\t<this.SidebarButton href={`${getSiteBase()}/#/search/`} onClick={() => App.forceUpdate()} icon={faHistory}>Recent Posts</this.SidebarButton>\n\t\t\t\t\t<this.SidebarButton href={`${getSiteBase()}/#/search/order:rank/`} icon={faChartLine} onClick={() => App.forceUpdate()}>Hot Posts</this.SidebarButton>\n\t\t\t\t\t<this.SidebarButton href={`${getSiteBase()}/#/`} icon={faBell}>Subscriptions</this.SidebarButton>\n\t\t\t\t\t<this.SidebarButton href={`${getSiteBase()}/#/favorites/`} icon={faHeart}>Favorites</this.SidebarButton>\n\t\t\t\t\t<this.SidebarButton href={`${getSiteBase()}/#/sets/`} icon={faLayerGroup}>Sets</this.SidebarButton>\n\t\t\t\t\t<this.SidebarButton onClick={() => Toasts.showToast(\"Not yet added!\", \"Failure\")} icon={faUser}>Account</this.SidebarButton> {/*href={`${getSiteBase()}/#/account/`}*/}\n\t\t\t\t\t<this.SidebarButton href={`${getSiteBase()}/#/settings/`} icon={faCog}>Settings</this.SidebarButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nSidebar.buttonRef = createRef();\n\nwindow.search = tags => {\n\twindow.location.assign(\"#/search/\" + encodeURIComponent(tags));\n\n\tPostList.instance && PostList.instance.setState({ fetch: true });\n\tApp.forceUpdate();\n};\n\nlet hash = window.location.hash;\n\nwindow.events = new EventListener();\nwindow.onpopstate = e => window.events.invoke(\"popstate\", e);\nwindow.events.subscribe(\"popstate\", async e => {\n\tconst lastHash = hash.split(\"?\")[0];\n\thash = window.location.hash.split(\"?\")[0];\n\t\n\tif (hash.split(\"/\")[1] !== lastHash.split(\"/\")[1])\n\t\treturn App.forceUpdate();\n\t\n\tconst post = getPageArgs(\"post\");\n\tif (post?.length && (!PostModal.current || PostModal.current.state?.post?.id !== post))\n\t\treturn; // TODO open post from history\n});\n\nexport default function App() {\n\tconst isMobile = useMediaQuery({ query: \"(max-width: 1224px)\" });\n\n\tlet username = localStorage.getItem(\"username\");\n\tlet apiKey = localStorage.getItem(\"apiKey\");\n\n\tApp.showNotice = function(text) {\n\t\topenModal(\n\t\t\t<div className=\"ClipboardModal\" onClick={() => closeModal()}>\n\t\t\t\t<span>\n\t\t\t\t\t{ text }\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t};\n\t\t\n\tApp.promptLogin = function(msg) {\n\t\topenModal(\n\t\t\t<div className=\"LoginModalContainer\">\n\t\t\t\t<div className=\"LoginModal\">\n\t\t\t\t\t<div className=\"Label\">\n\t\t\t\t\t\t{ msg }\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tIn order to login, you will need your username and your <span className=\"Link\">API key</span>.\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<input className=\"Field\" placeholder=\"Username\" onChange={e => username = e.target.value}/>\n\t\t\t\t\t<input className=\"Field\" placeholder=\"API key\" onChange={e => apiKey = e.target.value}/>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"Buttons\">\n\t\t\t\t\t\t<div className=\"Button\" onClick={() => tryLogin()}>Login</div>\n\t\t\t\t\t\t<div className=\"Button\" onClick={() => closeModal()}>Cancel</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tasync function tryLogin() {\n\t\tif (!username)\n\t\t\treturn App.showNotice(\"Your username must not be empty!\");\n\t\tif (!apiKey)\n\t\t\treturn App.showNotice(\"Your API key must not be empty!\");\n\t\t\n\t\ttry {\n\t\t\tconst args = { login: username, api_key: apiKey };\n\t\t\tconst res = await fetch(API.endpoint(\"posts\", { limit: 0, ...args }));\n\t\t\tconst data = await res.json();\n\n\t\t\tif (data.success === false)\n\t\t\t\treturn App.showNotice(\"Failed to login! Please try again.\\nNote: Your API key is not your password!\");\n\t\t\t\n\t\t\tAPI.login = args;\n\n\t\t\tlocalStorage.setItem(\"username\", username);\n\t\t\tlocalStorage.setItem(\"apiKey\", apiKey);\n\n\t\t\twindow.location.reload();\n\t\t} catch (err) {\n\t\t\tApp.showNotice(\"There was an error logging in, check your credentials and try again! Note: Your API key is not your password!\");\n\t\t\tconsole.error(err);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (!username || !apiKey) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (localStorage.getItem(\"api_key\") === null) {\n\t\t\t\t\topenModal(\n\t\t\t\t\t\t<div className=\"LoginModalContainer\">\n\t\t\t\t\t\t\t<div className=\"LoginModal\">\n\t\t\t\t\t\t\t\t<div className=\"Label\">\n\t\t\t\t\t\t\t\t\tIt appears you're not logged in, if you would like to login,\n\t\t\t\t\t\t\t\t\tyou will need your username and your <span className=\"Link\">API key</span>.\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t\t\t\t<input className=\"Field\" placeholder=\"Username\" onChange={e => username = e.target.value}/>\n\t\t\t\t\t\t\t\t<input className=\"Field\" placeholder=\"API key\" onChange={e => apiKey = e.target.value}/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div className=\"Buttons\">\n\t\t\t\t\t\t\t\t\t<div className=\"Button\" onClick={() => tryLogin()}>Login</div>\n\t\t\t\t\t\t\t\t\t<div className=\"Button\" onClick={() => closeModal()}>Not Now</div>\n\t\t\t\t\t\t\t\t\t<div className=\"Button\" onClick={() => localStorage.setItem(\"api_key\", \"\")}>Never Show Again</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\t});\n\t\n\tconst [, forceUpdate] = React.useReducer(x => x + 1, 0);\n\tApp.forceUpdate = forceUpdate;\n\n\tApp.settings = Serializer.load(\"settings\", {\n\t\tsubscriptions: [],\n\t\tblacklist: []\n\t});\n\n\tApp.saveSettings = () => Serializer.save(\"settings\", App.settings);\n\n\tApp.importSettings = () => {\n\t\tconst input = document.createElement(\"input\");\n\n\t\tinput.type = \"file\";\n\t\tinput.accept = \".json\";\n\n\t\tinput.addEventListener(\"change\", () => {\n\t\t\tconst { files } = input;\n\n\t\t\tif (files[0]) {\n\t\t\t\tnew Response(files[0]).json().then(data => {\n\t\t\t\t\tlocalStorage.clear();\n\n\t\t\t\t\tfor (const key in data) {\n\t\t\t\t\t\tlocalStorage[key] = data[key];\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}).catch(() => App.showNotice(\"Error importing file!\"));\n\t\t\t}\n\t\t});\n\n\t\tdocument.body.appendChild(input);\n\t\tinput.click();\n\t};\n\n\tApp.exportSettings = () => {\n\t\tconst url = URL.createObjectURL(new Blob([ JSON.stringify(localStorage, null, \"\\t\") ], { type: \"json\" }));\n\t\tconst a = document.createElement(\"a\");\n\n\t\ta.href = url;\n\t\ta.download = \"sucraloseSettings.json\";\n\n\t\tdocument.body.appendChild(a);\n\n\t\ta.click();\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.body.removeChild(a);\n\t\t\twindow.URL.revokeObjectURL(url);\n\t\t}, 0);\n\t};\n\n\tApp.loggedIn = () => API.login && API.login.login && API.login.api_key;\n\n\tif (!App.init) {\n\t\t(App.init = async () => {\n\t\t\tif (App.loggedIn()) {\n\t\t\t\tApp.localUserId = await API.fetchLocalUserId();\n\t\n\t\t\t\tif (!App.localUserId)\n\t\t\t\t\treturn;\n\t\n\t\t\t\t(App.init.postSets = async () => {\n\t\t\t\t\tconst res = await fetch(API.endpoint(\"post_sets\", { \"search[creator_id]\": App.localUserId }));\n\t\t\t\t\tApp.postSets = await res.json();\n\t\t\t\t})();\n\t\t\t}\n\t\t})();\n\t}\n\n\tconst HomePage = () => (<PostList tags={!App.settings.subscriptions ?\n\t\tnull : App.settings.subscriptions.filter(tag => tag.split(\" \").length === 1).map(tag => \"~\" + tag).join(\" \")}/>);\n\tconst SearchPage = () => (<PostList/>);\n\tconst FavoritesPage = () => (<PostList endpoint=\"favorites\" endpointArgs={{}}/>);\n\t\n\tlet Page;\n\t\n\tswitch (window.location.hash.split(\"/\")[1]) {\n\t\tdefault: Page = <HomePage/>; break;\n\t\tcase \"search\": Page = <SearchPage/>; break;\n\t\tcase \"favorites\": Page = <FavoritesPage/>; break;\n\t\tcase \"sets\":\n\t\t\tPage = window.location.hash.split(\"/\")[2] === \"create\"\n\t\t\t\t? <SetsPage.CreatePage/>\n\t\t\t\t: <SetsPage.MainPage/>;\n\t\t\tbreak;\n\t\tcase \"post\": Page = <PostPage/>; break;\n\t\tcase \"user\": Page = <UserPage/>; break;\n\t\tcase \"settings\": Page = <SettingsPage/>; break;\n\t}\n\n\treturn (\n\t\t<div className={\"App \" + (isMobile ? \"Mobile\" : \"Desktop\")}>\n\t\t\t<Sidebar/>\n\n\t\t\t<div>\n\t\t\t\t<header className=\"Header\">\n\t\t\t\t\t<img className=\"SidebarIcon\" src={SidebarIcon} ref={Sidebar.buttonRef} onClick={() => Sidebar.instance.toggle()} alt=\"Sidebar\"/>\n\t\t\t\t\t<span className=\"HeaderMain\">Sucralose!</span>\n\n\t\t\t\t\t<SearchBar>\n\t\t\t\t\t\t<Dropdown value={0} items={Object.keys(Order).map(key => ({ key, value: Order[key], label: \"Order: \" + key }))} callback={e => {\n\t\t\t\t\t\t\tPostList.instance && PostList.instance.setState({ order: e.state.value, fetch: PostList.instance.state.order !== e.state.value });\n\t\t\t\t\t\t}}/>\n\t\t\t\t\t</SearchBar>\n\t\t\t\t</header>\n\n\t\t\t\t<div className=\"Main\">\n\t\t\t\t\t{Page}\n\t\t\t\t</div>\n\n\t\t\t\t<footer className=\"Footer\">\n\t\t\t\t\t<span>Default Theme, <a href=\"https://www.nordtheme.com/\">Nord</a></span>\n\n\t\t\t\t\t<div className=\"Divider\"/>\n\t\t\t\t\t\n\t\t\t\t\t<span>© Copyright 2020-{new Date().getFullYear()} Metalloriff</span>\n\t\t\t\t</footer>\n\t\t\t</div>\n\n\t\t\t<Modals/>\n\t\t\t<Toasts/>\n\t\t\t<ContextMenu.Handler/>\n\t\t\t<SettingsRenderer/>\n\t\t</div>\n\t);\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker === null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType !== null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App/>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}