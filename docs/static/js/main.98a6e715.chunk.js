(this.webpackJsonpsucralose=this.webpackJsonpsucralose||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var s,r,a,c,i=n(11),o=n(15),l=n(13),u=n(2),d=n.n(u),p=n(7),h=n(3),j=n(4),b=n(6),f=n(5),v=n(1),m=n.n(v),O=(n(39),n(17)),x=n(16),g=n(14),y=n(10),k=n(0),C=[],w=function(t){Object(b.a)(u,t);var n=Object(f.a)(u);function u(){var e;Object(h.a)(this,u);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(e=n.call.apply(n,[this].concat(s))).state={active:!1,locked:!1,modals:[],closing:[]},e}return Object(j.a)(u,[{key:"componentDidMount",value:function(){var t=this;s=function(){var n=Object(p.a)(d.a.mark((function n(s){var r,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.state.locked){n.next=5;break}return n.next=3,new Promise((function(t){return e(t)}));case 3:n.next=0;break;case 5:return n.next=7,new Promise((function(t){return e(t)}));case 7:return r=t.state.modals,a=r.push(s),t.setState({modals:r,active:!0}),n.abrupt("return",a);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),r=function(){if(t.state.modals.length>0){var e=Object(l.a)(t.state.modals),n=t.state.modals[e.length-1],s=Object(l.a)(t.state.closing);e.pop(n),s.push(n),t.state.active&&(t.setState({active:e.length>0,locked:!0,closing:s}),setTimeout((function(){t.state.closing.pop(n),t.setState({modals:e,locked:!1})}),300));var r,a=Object(o.a)(C);try{for(a.s();!(r=a.n()).done;){(0,r.value)()}}catch(c){a.e(c)}finally{a.f()}C=[]}},a=function(e){try{window.navigator.clipboard.writeText(e),x.a.showToast(Object(k.jsxs)("span",{children:[Object(k.jsx)("b",{children:e.length>=100?e.substr(0,100)+"...":e})," copied to clipboard"]}),"Success")}catch(t){c({title:"Failed To Copy",description:"Your browser does not support copying to clipboard, you can manually copy here.",value:e})}},function(e,t){var n=function(){var n=m.a.useRef(),s="function"===typeof t?t():null,a=function(e){var t=e.img,n=m.a.useState(-1),r=Object(i.a)(n,2),a=r[0],c=r[1];m.a.useEffect((function(){setTimeout((function(){t.current&&c(s.indexOf(t.current.src))}),500)}));var o=function(e,n){t.current.src=s[a+n],c(a+n),e.preventDefault(),e.stopPropagation()};return-1===a?null:Object(k.jsxs)("div",{className:"ArrowsContainer",children:[a>0?Object(k.jsx)("div",{className:"Arrow Left",onClick:function(e){return o(e,-1)},children:Object(k.jsx)(g.a,{className:"Icon",icon:y.e})}):null,a<s.length-1?Object(k.jsx)("div",{className:"Arrow Right",onClick:function(e){return o(e,1)},children:Object(k.jsx)(g.a,{className:"Icon",icon:y.f})}):null]})};return Object(k.jsxs)("div",{className:"ImageModal",onClick:function(){return r()},children:[Object(k.jsx)("img",{ref:n,src:e,alt:"Image failed to load."}),(null===s||void 0===s?void 0:s.length)?Object(k.jsx)(a,{img:n}):null]})};s(Object(k.jsx)(n,{}))},function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a,c,i,o,l,u,p,h,j,b,f,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=void 0===n?"":n,c=t.description,i=void 0===c?"":c,o=t.yesText,l=void 0===o?"Yes":o,u=t.noText,p=void 0===u?"No":u,h=t.yesColor,j=void 0===h?"#ff6666":h,b=t.noColor,f=void 0===b?"":b,e.next=3,new Promise((function(e){s(Object(k.jsxs)("div",{className:"BoolModal PrimaryBg",children:[Object(k.jsx)("div",{className:"Title",dangerouslySetInnerHTML:{__html:a}}),Object(k.jsx)("div",{className:"Description",dangerouslySetInnerHTML:{__html:i}}),Object(k.jsxs)("div",{className:"Footer",children:[Object(k.jsx)("div",{className:"Button TertiaryBg",onClick:function(){return e(!1)},style:{backgroundColor:f},children:p}),Object(k.jsx)("div",{className:"Button TertiaryBg",onClick:function(){return e(!0)},style:{backgroundColor:j},children:l})]})]}))}));case 3:return v=e.sent,r(),e.abrupt("return",v);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a,c,i,o,l,u,p,h,j,b,f,v,m,O,x,g,y;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=void 0===n?"":n,c=t.description,i=void 0===c?"":c,o=t.yesText,l=void 0===o?"Confirm":o,u=t.noText,p=void 0===u?"Cancel":u,h=t.yesColor,j=void 0===h?"":h,b=t.noColor,f=void 0===b?"":b,v=t.value,m=void 0===v?"":v,O=t.onChange,x=void 0===O?null:O,g=Math.random().toString(36).substr(7),e.next=4,new Promise((function(e){s(Object(k.jsxs)("div",{className:"StringModal PrimaryBg",children:[Object(k.jsx)("div",{className:"Title",dangerouslySetInnerHTML:{__html:a}}),Object(k.jsx)("div",{className:"Description",dangerouslySetInnerHTML:{__html:i}}),Object(k.jsx)("input",{id:g,className:"Field TertiaryBg",defaultValue:m,onChange:x}),Object(k.jsxs)("div",{className:"Footer",children:[Object(k.jsx)("div",{className:"Button TertiaryBg",onClick:function(){return e("")},style:{backgroundColor:f},children:p}),Object(k.jsx)("div",{className:"Button TertiaryBg",onClick:function(){return e(document.getElementById(g).value)},style:{backgroundColor:j},children:l})]})]}))}));case 4:return y=e.sent,r(),e.abrupt("return",y);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},{key:"render",value:function(){var e=this;return Object(k.jsx)(O.a,{children:Object(k.jsx)("div",{className:"ModalContainer"+(this.state.active?" Active":""),onClick:function(t){var n,s;(t.target===t.currentTarget||t.target.classList.contains("Modal"))&&(null!==(n=null===(s=e.state.modals[e.state.modals.length-1].props)||void 0===s?void 0:s.onBackdropClick)&&void 0!==n?n:r)()},children:this.state.modals.map((function(t){return Object(k.jsx)("div",{className:"Modal"+(e.state.closing.includes(t)||e.state.modals.indexOf(t)<e.state.modals.length-1&&0===e.state.closing.length?" Closing":""),style:{zIndex:10*e.state.modals.indexOf(t)},children:Object(k.jsx)(O.a,{children:t})},e.state.modals.indexOf(t))}))})})}}]),u}(m.a.Component)}).call(this,n(26).setImmediate)},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var s=n(13),r=n(3),a=n(4),c=n(6),i=n(5),o=n(11),l=n(1),u=n.n(l);n(41);function d(){for(var e="",t=0;t<arguments.length;t++){switch(typeof arguments[t]){case Array.isArray(arguments[t])&&"boolean"===typeof arguments[t][0]&&"object":!0===arguments[t][0]?e+=arguments[t][1]:arguments[t][2]&&(e+=arguments[t][2]);break;default:e+=arguments[t]}e+=" "}return e.trim()}function p(){return Math.random().toString(36).substr(7)}Object.exclude=function(e){for(var t=Object.assign({},e),n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];for(var a=0,c=s;a<c.length;a++){var i=c[a];delete t[i]}return t};var h=function(){function e(t,n){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(r.a)(this,e),this.callback=t,this.duration=n,this.remainingTime=n,s&&this.resume()}return Object(a.a)(e,[{key:"resume",value:function(){this.startTime=Date.now(),clearTimeout(this.id),this.id=setTimeout(this.callback,this.remainingTime)}},{key:"pause",value:function(){clearTimeout(this.id),this.remainingTime-=Date.now()-this.startTime}},{key:"end",value:function(){clearTimeout(this.id),this.callback()}}]),e}(),j=n(0);function b(e){var t=e.children,n=e.type,s=e.life,r=e.remove,a=e.callback,c=e.color,i=e.fixedTime,l=void 0!==i&&i,p=function(){m(!0),setTimeout(r,500)},b=u.a.useState(!1),f=Object(o.a)(b,2),v=f[0],m=f[1],O=u.a.useMemo((function(){return new h(p,1e3*s,!1)}),[]),x=u.a.useRef(),g=function(){O.pause(),x.current.style.animationPlayState="paused"},y=function(){O.resume(),x.current.style.animationPlayState="running"};return u.a.useEffect((function(){var e=function(){return!l&&y()},t=function(){return!l&&g()};return window.addEventListener("focus",e),window.addEventListener("blur",t),(l||document.hasFocus())&&y(),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t)}})),Object(j.jsxs)("div",{className:d("Toast",[v,"Closing"],n),onMouseEnter:l?null:g,onMouseLeave:l?null:y,onClick:a?function(e){a(e),O.end()}:function(){O.end()},style:{cursor:a?"pointer":null,backgroundColor:c},children:[t,Object(j.jsx)("div",{className:"ProgressBarContainer",children:Object(j.jsx)("div",{ref:x,className:"ProgressBar",style:{animationDuration:s+"s"}})})]})}var f=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={toasts:[]},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){n.instance=this}},{key:"horizontalStyle",get:function(){return"Center"}},{key:"verticalStyle",get:function(){return"Bottom"}},{key:"render",value:function(){var e,t=this;return Object(j.jsxs)("div",{ref:n.ref,className:d("ToastsContainer",this.horizontalStyle,this.verticalStyle),children:[Object(j.jsx)("div",{className:d("ClearButton",[!!(null===(e=this.state.toasts)||void 0===e?void 0:e.length),"Visible"]),onClick:function(){return t.setState({toasts:[]})},children:Object(j.jsx)("u",{children:"Close all"})}),this.state.toasts]})}}],[{key:"showToast",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=a.callback,i=void 0===c?null:c,o=a.color,l=void 0===o?null:o,d=a.fixedTime,h=void 0!==d&&d,j=u.a.createElement(b,{key:p(),children:e,type:n,life:r,color:l,fixedTime:h,remove:function(){t.instance.setState({toasts:t.instance.state.toasts.filter((function(e){return e!==j}))})},callback:i});return this.instance.setState({toasts:[].concat(Object(s.a)(this.instance.state.toasts),[j])}),j}}]),n}(u.a.Component);f.ref=u.a.createRef()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(3),r=n(4),a=n(6),c=n(5),i=n(1),o=n.n(i),l=(n(40),n(12)),u=n(0),d=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={error:null,errorInfo:null,moreInfo:!1},r}return Object(r.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"showErrorInfo",value:function(){var e=this.state,t=e.error,n=e.errorInfo;Object(l.d)(Object(u.jsxs)("div",{className:"ErrorInfoModal PrimaryBg",onClick:function(){return Object(l.b)()},children:[Object(u.jsx)("h1",{children:t.message}),n.componentStack.split("\n").slice(0,10).map((function(e,t){return Object(u.jsx)("h2",{children:e},t)}))]}))}},{key:"renderError",value:function(){var e=this;this.state.moreInfo;return Object(u.jsxs)("div",{className:"ErrorBoundaryHandler",children:[Object(u.jsx)("h1",{children:"There was an error with this component!"}),Object(u.jsx)("h2",{children:"This is due to a plugin error or application error."}),Object(u.jsxs)("div",{className:"ErrorBoundaryFooter",children:[Object(u.jsx)("div",{className:"ErrorBoundaryButton TertiaryBg",onClick:function(){return e.showErrorInfo()},children:"More Info"}),Object(u.jsx)("div",{className:"ErrorBoundaryButton BackgroundDanger",onClick:function(){return e.setState({error:null})},children:"Retry"})]})]})}},{key:"render",value:function(){return this.state.error?this.renderError():this.props.children}}]),n}(o.a.Component)},,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(23),c=n.n(a),i=(n(32),n(8)),o=n(11),l=n(2),u=n.n(l),d=n(7),p=n(3),h=n(4),j=n(6),b=n(5),f=n(27),v=(n(34),n(35),n(0)),m=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={value:null,open:!1},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.value&&this.setState({value:this.props.items[this.props.value].value})}},{key:"componentDidUpdate",value:function(){this.props.callback&&this.props.callback(this)}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"Dropdown"+(this.state.open?" Open":""),children:[Object(v.jsx)("div",{className:"DropdownItem Selected"+(this.state.value?"":" Grayed"),onClick:function(){return e.setState({open:!e.state.open})},children:(this.props.items.find((function(t){return t.value===e.state.value}))||{}).label||this.props.placeholder||"None selected"}),this.props.items.map((function(t){var n=t.key,s=t.value,r=t.label;return Object(v.jsx)("div",{className:"DropdownItem",onClick:function(){return e.setState({value:s,open:!1})},children:r},n)}))]})}}]),n}(r.a.Component),O=n(12),x=n(13),g=n(15),y=n(16);Object.find=function(e,t){var n,s=e,r=t.split("."),a=Object(g.a)(r);try{for(a.s();!(n=a.n()).done;){var c=n.value;s&&(s=s[c])}}catch(i){a.e(i)}finally{a.f()}return s};var k=fetch,C=-600;fetch=function(){var e=Object(d.a)(u.a.mark((function e(){var t=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(performance.now()-C<600)){e.next=3;break}return e.next=3,new Promise((function(e){return setTimeout(e,600)}));case 3:return C=performance.now(),e.next=6,k.call.apply(k,[window].concat(Array.prototype.slice.call(t)));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var w={login:{login:localStorage.getItem("username"),api_key:localStorage.getItem("apiKey")},endpoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.login;s.login&&s.api_key||(s={}),Object.assign(t,Object(i.a)(Object(i.a)({},s),{},{_client:"Sucralose/1.0 by roclo"}));var r="";for(var a in t)r.length>0&&(r+="&"),r+=a+"="+t[a];return"https://e621.net/"+e+(n?"?":".json?")+r},fetchLocalUserId:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.endpoint("users/home",{},!0));case 3:return t=e.sent,e.next=6,t.text();case 6:if(n=e.sent,!((s=(new DOMParser).parseFromString(n,"text/html")).getElementsByClassName("guest-warning").length>0)){e.next=10;break}return e.abrupt("return",null);case 10:if(!(r=Object(x.a)(s.getElementsByClassName("link-page")[0].getElementsByTagName("a")).find((function(e){return"My profile"===e.innerText&&e.pathname.startsWith("/users/")})))){e.next=13;break}return e.abrupt("return",r.pathname.split("/")[2]);case 13:return e.abrupt("return",null);case 16:return e.prev=16,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}()};function S(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}var N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=localStorage.getItem(e);return n?null===s?t:JSON.parse(s):null===s?t:s},I=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t)},T={Default:"",Random:"order:random",Score:"order:score",FavCount:"order:favcount",TagCount:"order:tagcount",Resolution:"order:mpixels",FileSize:"order:filesize"};function B(e){return"url(".concat(e,")")}function M(e){var t=window.location.hash.split("?")[0].split("/"),n=t.indexOf(e);return-1===n?"":decodeURIComponent(t[n+1]||"")}function P(e){var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["bytes","KB","MB","GB"][t]}function E(e){fetch("https://api.allorigins.win/raw?url=".concat(encodeURIComponent(e))).then((function(e){return e.blob()})).then((function(t){var n=Object.assign(document.createElement("a"),{style:{display:"none"},href:URL.createObjectURL(t),download:e.split("/")[e.split("/").length-1]});document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(n.href),n.remove()})).catch((function(e){return console.error(e),y.a.showToast("Failed to save image!","Failure")}))}var D={convert:function(){var e,t=(document.location.href.split("?")[1]||"").split("&"),n={},s=Object(g.a)(t);try{for(s.s();!(e=s.n()).done;){var r=e.value.split("="),a=Object(o.a)(r,2),c=a[0],i=a[1];c&&i&&(n[c]=i)}}catch(l){s.e(l)}finally{s.f()}return n},set:function(e,t){e=encodeURIComponent(e),t=encodeURIComponent(t);var n=D.convert();n[e]=t;var s="";for(var r in n){var a;r&&(null===(a=n[r])||void 0===a?void 0:a.length)&&(s+="".concat(0===s.length?"?":"&").concat(r,"=").concat(n[r]))}var c=window.location.href.split("?")[0]+s;return window.location.href===c||window.history.pushState({},"",c),n},get:function(e){return D.convert()[e]}};function L(){return"localhost"===window.location.hostname?window.location.origin:window.location.origin+"/sucralose"}var A,_,F=n(19),R=(n(44),n.p+"static/media/Chevron.c3ee4024.svg"),U=n(17),W=n(14),H=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).ref=Object(s.createRef)(),e.docClickEv=function(t){!e.ref.current||e.ref.current.contains(t.target)||document.getElementsByClassName("ContextMenu")[0].contains(t.target)||e.close()},e}return Object(h.a)(n,[{key:"close",value:function(){n.activeWrapper&&n.activeWrapper.setState({menu:null,open:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.docClickEv)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickEv)}},{key:"render",value:function(){return Object(v.jsx)(U.a,{children:Object(v.jsx)("div",Object(i.a)(Object(i.a)({className:"ContextMenu"},this.props),{},{ref:this.ref,children:this.props.children}))})}}]),n}(r.a.Component);H.Handler=(_=A=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsx)(U.a,{children:Object(v.jsx)("div",{ref:H.Handler.ref,className:"ContextMenuWrapper MainContextMenuContainer"})})}}]),n}(r.a.Component),A.ref=Object(s.createRef)(),_),H.Wrapper=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={menu:null,open:!1},e.ref=Object(s.createRef)(),e.handleContextMenu=function(t){var n,s,r,a;if("function"===typeof t.preventDefault&&t.preventDefault(),H.activeWrapper){if(e.ref.current.contains(H.activeWrapper.ref.current)&&H.activeWrapper.props.menu!==e.props.menu)return;H.activeWrapper.setState({menu:null,open:!1})}H.activeWrapper=Object(F.a)(e);for(var o=(null===(n=(s=e.props.menu.props).overrideY)||void 0===n?void 0:n.call(s))||t.clientY,l=(null===(r=(a=e.props.menu.props).overrideX)||void 0===r?void 0:r.call(a))||t.clientX;l+200>window.innerWidth;)l-=10;e.setState({menu:c.a.createPortal(Object(v.jsx)("div",Object(i.a)(Object(i.a)({className:"ContextMenuContainer SecondaryBg"},e.publicProps),{},{style:{position:"fixed",top:o,left:l},children:e.props.menu})),H.Handler.ref.current),open:!0})},e}return Object(h.a)(n,[{key:"publicProps",get:function(){return Object.exclude(this.props,"menu","openOnClick","wrapperClassName","overrideX","overrideY")}},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n,s){var r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H.activeWrapper!==this||this.state.open||(H.activeWrapper=null),this.state.open&&this.ref.current&&(r=document.getElementsByClassName("ContextMenuContainer"),a=Object(o.a)(r,1),c=a[0],i=c.getBoundingClientRect(),c.style.transform=i.y+i.height>window.innerHeight?"translateY(".concat(window.innerHeight-(i.y+i.height)-20,"px)"):null);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,s){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.menu?Object(v.jsx)(U.a,{children:Object(v.jsxs)("div",Object(i.a)(Object(i.a)({ref:this.ref,className:"ContextMenuWrapper "+(this.props.wrapperClassName||""),onClick:this.props.openOnClick?function(t){"function"!==typeof t.target.onClick&&e.handleContextMenu(e.props.openOnClick())}:null},this.publicProps),{},{onContextMenu:this.handleContextMenu,children:[this.props.children,Object(v.jsx)(U.a,{children:this.state.open?this.state.menu:null})]}))}):this.props.children}}]),n}(r.a.Component),H.Item=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){t.preventDefault(),t.stopPropagation(),H.activeWrapper&&e.props.autoClose&&H.activeWrapper.setState({menu:null,open:!1}),e.props.onClick&&e.props.onClick(Object(F.a)(e))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=Object.assign({},this.props);return delete e.autoClose,delete e.icon,Object(v.jsxs)("div",Object(i.a)(Object(i.a)({className:"ContextMenuItem"},e),{},{onClick:this.handleClick,children:[this.props.icon?Object(v.jsx)(W.a,{icon:this.props.icon,className:"Icon"}):null,this.props.children]}))}}]),n}(r.a.Component),H.SubMenuItem=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleMouseEnter=function(){e.setState({open:!0})},e.handleMouseLeave=function(){e.setState({open:!1})},e.handleClick=function(t){t.target==t.currentTarget&&(H.activeWrapper&&e.props.autoClose&&H.activeWrapper.setState({menu:null,open:!1}),e.props.onClick&&e.props.onClick(Object(F.a)(e)))},e}return Object(h.a)(n,[{key:"mount",value:function(e){if(e){var t=e.getBoundingClientRect();e.style.transform=t.y+t.height>window.innerHeight?"translateY(".concat(window.innerHeight-(t.y+t.height)-20,"px)"):null,t.x+t.width>window.innerWidth&&(e.style.left="unset",e.style.right="100%")}}},{key:"render",value:function(){var e=Object.assign({},this.props);return delete e.autoClose,delete e.label,delete e.icon,Object(v.jsxs)("div",Object(i.a)(Object(i.a)({className:"ContextMenuItem HasSubMenu"},e),{},{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[this.props.icon?Object(v.jsx)(W.a,{icon:this.props.icon,className:"Icon"}):null,this.props.label," ",Object(v.jsx)("img",{className:"ContextSubMenuChevron",src:R}),this.state.open?Object(v.jsx)("div",{className:"ContextMenuContainer SubMenuContainer SecondaryBg",ref:this.mount,children:Object(v.jsx)("div",{className:"ContextMenu SubMenu",children:this.props.children})}):null]}))}}]),n}(r.a.Component),H.ToggleItem=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={checked:!1},e.callback=function(){H.activeWrapper&&e.props.autoClose&&H.activeWrapper.setState({menu:null,open:!1});var t=!e.state.checked;e.props.callback&&e.props.callback(t),e.setState({checked:t})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setState({checked:this.props.checked})}},{key:"render",value:function(){var e=Object.assign({},this.props);return delete e.autoClose,delete e.callback,Object(v.jsxs)("div",Object(i.a)(Object(i.a)({className:"ContextMenuItem ToggleItem"},e),{},{onClick:this.callback,children:[Object(v.jsx)("div",{className:"ToggleBox"+(this.state.checked?" Checked":""),children:this.state.checked?Object(v.jsx)("div",{className:"ToggleBoxTick"}):null}),this.props.children]}))}}]),n}(r.a.Component),H.Divider=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",Object(i.a)({className:"ContextMenuDivider"},this.props))}}]),n}(r.a.Component);var V=H,Y=(n(45),n(46),n.p+"static/media/Spinner.bc3f17b3.svg");n(47);function z(){return Object(v.jsxs)("div",{className:"InlineLoadingContainer",children:[Object(v.jsx)("div",{className:"Dot A"}),Object(v.jsx)("div",{className:"Dot B"}),Object(v.jsx)("div",{className:"Dot C"})]})}var K=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={upvotes:0,downvotes:0,selfScore:0,favorited:!1},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.is_favorited&&this.setState({favorited:!0})}},{key:"vote",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,te.vote(this.props.id,t);case 3:e.t1=e.sent,e.t0.setState.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"favorite",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,te.favorite(this.props.id,this.state.favorited);case 3:e.t1=e.sent,e.t0.setState.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)(V,{children:[Object(v.jsx)(V.Item,{className:"ContextMenuItem VotesItem",children:Object(v.jsxs)("div",{className:"Votes",children:[Object(v.jsxs)("span",{className:this.state.selfScore>0?"Voted":null,onClick:function(){return e.vote(1)},children:["\ud83d\udd3c ",this.state.upvotes||this.props.score.up]}),Object(v.jsxs)("span",{className:this.state.selfScore<0?"Voted":null,onClick:function(){return e.vote(-1)},children:["\ud83d\udd3d ",-(this.state.downvotes||this.props.score.down)]}),Object(v.jsxs)("span",{className:this.state.favorited?"Voted":null,onClick:function(){return e.favorite()},children:["\ud83d\udc99 ",this.props.fav_count+(this.state.favorited?1:0)]})]})}),Object(v.jsx)(V.Divider,{}),Object(v.jsx)(ee,Object(i.a)({},this.props))]})}}]),n}(r.a.Component),q=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={loaded:!1,post:{}},e.close=function(e){if(Object(O.b)(),!0!==e)return!0;D.set("post","")},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setState({post:this.props}),D.set("post",this.props.id),window.events.subscribe("popstate",this.close,{priority:1e3}),n.current=this}},{key:"componentWillUnmount",value:function(){D.set("post",""),window.events.unsubscribe("popstate",this.close)}},{key:"componentDidUpdate",value:function(){var e=this;if(!this.state.loaded){if("webm"===(Object.find(this.state.post,"file.ext")||""))return this.setState({loaded:!0});var t=new Image;t.addEventListener("load",(function(){return e.setState({loaded:!0})})),t.src=this.state.post.file.url}}},{key:"getOffsetPost",value:function(e){var t=this;return se.instance.state.posts[se.instance.state.posts.findIndex((function(e){return e.id===t.state.post.id}))+e]}},{key:"handleClick",value:function(e){if(e.target.classList.contains("NavButton")){var t=e.target.classList.contains("Next")?1:-1;this.getOffsetPost(t)&&this.setState({post:this.getOffsetPost(t),loaded:!1})}else(e.target.classList.contains("Image")||e.target.classList.contains("ContextMenuWrapper"))&&this.close(!0)}},{key:"render",value:function(){var e=this,t=this.state.post,n=Object.find(t,"preview.url"),s=Object.find(t,"file.url"),r=null;if(t&&t.file)switch(t.file.ext){default:r=Object(v.jsx)("div",{className:"Image",style:{backgroundImage:B(s)}});break;case"webm":r=Object(v.jsx)("video",{controls:!0,className:"Image Video",children:Object(v.jsx)("source",{src:s,type:"video/webm"})})}return Object(v.jsx)("div",{className:"PostModal",onClick:function(t){return e.handleClick(t)},children:Object(v.jsxs)("div",{className:"Image"+(this.state.loaded?"":" Preview"),style:{backgroundImage:t&&t.file&&"webm"!==t.file.ext&&!this.state.loaded?B(n):null},children:[this.state.loaded?Object(v.jsx)(V.Wrapper,{menu:Object(v.jsx)(K,Object(i.a)({},t)),children:r}):Object(v.jsx)("span",{className:"SpinnerOverlay",children:Object(v.jsx)(z,{})}),Object(v.jsxs)("div",{className:"NavButtons",children:[Object(v.jsx)("img",{src:R,className:"NavButton Prev"+(null===this.getOffsetPost(-1)?" Disabled":"")}),Object(v.jsx)("img",{src:R,className:"NavButton Next"+(null===this.getOffsetPost(1)?" Disabled":"")})]})]})})}}]),n}(r.a.Component),J=(n(48),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsx)("a",Object(i.a)(Object(i.a)({className:"LinkWrapper"},this.props),{},{children:this.props.children}))}}]),n}(r.a.Component)),X=(n(49),n(50),n.p+"static/media/Search.cc51b702.svg"),G=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={searching:!1,acResults:[]},e.acUpdateInstance=-1,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){n.instance=this}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&(e.preventDefault(),window.search(e.target.textContent))}},{key:"handleInput",value:function(e){var t=this,n=e.target.textContent;clearTimeout(this.acUpdateInstance),this.acUpdateInstance=setTimeout((function(){t.handleAutoCompleteUpdate(n.split(" ")).catch(console.warn)}),200)}},{key:"handleAutoCompleteUpdate",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t[t.length-1]||"").replace(/(-|~)/g,"")){e.next=3;break}return e.abrupt("return",this.setState({acResults:[]}));case 3:return e.next=5,fetch(w.endpoint("tags",{commit:"Search",limit:10,"search[hide_empty]":"yes","search[name_matches]":n.replace(/\*/g,"")+"*","search[order]":"count"}));case 5:return s=e.sent,e.next=8,s.json();case 8:r=e.sent,this.setState({acResults:r});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleAutoCompleteSelect",value:function(e){var t=document.getElementsByClassName("SearchBar"),n=Object(o.a)(t,1)[0],s=n.textContent.split(" ");s.pop(),n.textContent="".concat(s.join(" ")," ").concat(e),n.focus(),document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd(),this.setState({acResults:[]})}},{key:"handleFocusChange",value:function(e,t){var n=e.currentTarget,s=n.parentElement,r=n.textContent,a=s.getElementsByClassName("AutoComplete"),c=Object(o.a)(a,1)[0];t?(s.classList.add("Focused"),c.style.opacity=1):(0===r.length&&s.classList.remove("Focused"),c.style.opacity=null)}},{key:"render",value:function(){var e=this,t=this.state.acResults;return Object(v.jsxs)("div",{className:"SearchBarContainer",children:[Object(v.jsx)("div",{contentEditable:!0,className:"SearchBar",onKeyDown:function(t){return e.handleKeyDown(t)},onFocus:function(t){return e.handleFocusChange(t,!0)},onBlur:function(t){return e.handleFocusChange(t,!1)},onInput:function(t){return e.handleInput(t)}}),Object(v.jsx)("img",{src:this.state.searching?Y:X,className:this.state.searching?"Spinner":null,onClick:function(e){return window.search(e.target.previousSibling.textContent)}}),this.props.children,Object(v.jsx)("div",{className:"AutoComplete",children:t&&t.length?t.map((function(t){var n=t.id,s=t.name,r=t.post_count;return Object(v.jsxs)("div",{className:"Result",onClick:function(){return e.handleAutoCompleteSelect(s)},children:[Object(v.jsx)("span",{className:"Title",children:s}),Object(v.jsxs)("span",{children:[Object(v.jsx)("span",{className:"Count",children:r}),"posts"]})]},n)})):null})]})}}]),n}(r.a.Component),$=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).searchBar=document.getElementsByClassName("SearchBar")[0],e}return Object(h.a)(n,[{key:"searchContains",value:function(){return this.searchBar.textContent.includes(this.props.tag)}},{key:"handleClick",value:function(e){switch(e.target.id){case"search":this.searchBar.textContent+=" "+this.props.tag,this.searchBar.parentElement.classList.add("Focused");break;case"unsearch":this.searchBar.textContent=this.searchBar.textContent.split(this.props.tag).join("");break;case"subscribe":ke.settings.subscriptions.push(this.props.tag);break;case"unsubscribe":ke.settings.subscriptions.splice(ke.settings.subscriptions.indexOf(this.props.tag),1);break;case"blacklist":ke.settings.blacklist.push(this.props.tag);break;case"unblacklist":ke.settings.blacklist.splice(ke.settings.blacklist.indexOf(this.props.tag),1)}ke.saveSettings(),this.forceUpdate()}},{key:"render",value:function(){var e=this;return Object(v.jsxs)(V,{onClick:function(t){return e.handleClick(t)},children:[this.searchContains()?Object(v.jsx)(V.Item,{id:"unsearch",children:"Remove From Search"}):Object(v.jsx)(V.Item,{id:"search",children:"Add To Search"}),Object(v.jsx)(V.Divider,{}),ke.settings.subscriptions.includes(this.props.tag)?Object(v.jsx)(V.Item,{id:"unsubscribe",children:"Unsubscribe To Tag"}):Object(v.jsx)(V.Item,{id:"subscribe",children:"Subscribe To Tag"}),ke.settings.blacklist.includes(this.props.tag)?Object(v.jsx)(V.Item,{id:"unblacklist",children:"Remove From Blacklist"}):Object(v.jsx)(V.Item,{id:"blacklist",children:"Add To Blacklist"})]})}}]),n}(r.a.Component),Q=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.tags;return Object(v.jsx)("div",{className:"PostTags",children:Object.keys(e).map((function(t){return["invalid","lore","meta"].includes(t)&&0===e[t].length?null:Object(v.jsxs)("div",{className:"CategoryLabel",children:[Object(v.jsx)("b",{children:t.replace(/^[a-z]/,(function(e){return e.toUpperCase()}))}),e[t].length>0?e[t].map((function(e){return Object(v.jsx)(V.Wrapper,{menu:Object(v.jsx)($,{tag:e}),children:Object(v.jsx)(J,{href:"#/search/"+e,children:Object(v.jsx)("div",{className:"Tag",children:e})})},e)})):Object(v.jsx)("div",{className:"TagPlaceholder",children:"No tags here."})]},t)}))})}}]),n}(r.a.Component),Z=n(10),ee=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"handleSet",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w.endpoint("post_sets/"+t.id+(t.post_ids.includes(this.props.id)?"/remove_posts":"/add_posts"),{"post_ids[]":this.props.id}),{method:"POST"});case 2:return s=e.sent,e.next=5,s.json();case 5:ke.postSets[ke.postSets.findIndex((function(e){return e.id===t.id}))]=e.sent,this.forceUpdate();case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)(V,{children:[Object(v.jsx)(V.Item,{autoClose:!0,onClick:function(){return window.open(e.props.file.url,"_blank")},icon:Z.m,children:"View Image"}),Object(v.jsx)(V.Item,{autoClose:!0,onClick:function(){return E(e.props.file.url)},icon:Z.i,children:"Save Image"}),Object(v.jsx)(V.Item,{autoClose:!0,onClick:function(){return Object(O.c)(e.props.file.url)},icon:Z.g,children:"Copy Image URL"}),Object(v.jsx)(V.Divider,{}),Object(v.jsx)(V.Item,{autoClose:!0,onClick:function(){return window.open("#/post/"+e.props.id)},icon:Z.j,children:"Open In New Tab"}),ke.loggedIn()&&ke.postSets?Object(v.jsxs)("div",{children:[Object(v.jsx)(V.Divider,{}),Object(v.jsxs)(V.SubMenuItem,{label:"Manage Sets",icon:Z.n,children:[ke.postSets.map((function(t){return Object(v.jsx)(V.Item,{onClick:function(){return e.handleSet(t)},className:"ContextMenuItem SetContextMenuItem"+(t.post_ids.includes(e.props.id)?" Added":""),children:Object(v.jsx)("span",{children:t.name})},t.id)})),Object(v.jsx)(V.Divider,{}),Object(v.jsx)(V.Item,{autoClose:!0,onClick:function(){return window.location.assign("#/sets/create")},icon:Z.o,children:"Create Set"}),Object(v.jsx)(V.Item,{autoClose:!0,onClick:function(){return window.location.assign("#/sets/manage")},icon:Z.h,children:"Manage All"})]})]}):null]})}}]),n}(r.a.Component),te=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={upvotes:0,downvotes:0,selfScore:0,favorited:!1,loading:!0},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setState({favorited:this.props.is_favorited})}},{key:"vote",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,n.vote(this.props.id,t);case 3:e.t1=e.sent,e.t0.setState.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"favorite",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,n.favorite(this.props.id,this.state.favorited);case 3:e.t1=e.sent,e.t0.setState.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.sample,s=t.tags,r=t.id,a=t.fav_count,c=t.score,o=this.state.loading;return Object(v.jsx)("div",{children:Object(v.jsx)(V.Wrapper,{menu:Object(v.jsx)(ee,Object(i.a)({},this.props)),children:Object(v.jsxs)("div",{className:"Post",children:[Object(v.jsx)("img",{className:"Preview",src:n.url,onClick:O.d.bind(null,Object(v.jsx)(q,Object(i.a)({},this.props))),alt:"",onLoad:function(){return e.setState({loading:!1})}}),o?Object(v.jsx)(z,{}):null,Object(v.jsx)("div",{className:"Details PostHeader",children:Object(v.jsxs)("span",{children:[Object(v.jsxs)("b",{children:["Artist",s.artist.length>1?"s":"",":"]})," ",s.artist.map((function(e){return Object(v.jsxs)("span",{children:[Object(v.jsx)(V.Wrapper,{menu:Object(v.jsx)($,{tag:e}),children:Object(v.jsx)("span",{className:"Link",onClick:function(){return window.search(e)},children:e})}),s.artist.indexOf(e)+1===s.artist.length?null:Object(v.jsx)("span",{children:", "})]},e)}))]})}),Object(v.jsxs)("div",{className:"Details PostFooter",children:[Object(v.jsxs)("span",{className:this.state.selfScore>0?"Voted":null,onClick:function(){return e.vote(1)},children:[Object(v.jsx)(W.a,{icon:Z.c,className:"Icon"})," ",this.state.upvotes||c.up]}),Object(v.jsxs)("span",{className:this.state.selfScore<0?"Voted":null,onClick:function(){return e.vote(-1)},children:[Object(v.jsx)(W.a,{icon:Z.b,className:"Icon"})," ",-(this.state.downvotes||c.down)]}),Object(v.jsxs)("span",{className:this.state.favorited?"Voted":null,onClick:function(){return e.favorite()},children:[Object(v.jsx)(W.a,{icon:Z.k})," ",a+(this.state.favorited?1:0)]}),Object(v.jsx)(J,{href:"#/post/"+r,children:Object(v.jsx)(W.a,{icon:Z.j})})]})]})})})}}]),n}(r.a.Component);te.voting={},te.favoriting={},te.vote=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ke.loggedIn()){e.next=2;break}return e.abrupt("return",ke.promptLogin("You must be logged in to vote on posts!"));case 2:if(te.voting[t]){e.next=15;break}return te.voting[t]=!0,e.next=6,fetch(w.endpoint("posts/"+t+"/votes",{score:n,no_unvote:!1}),{method:"POST"});case 6:return s=e.sent,e.next=9,s.json();case 9:return r=e.sent,delete te.voting[t],y.a.showToast("".concat(0===r.our_score?"Removed":"Added"," ").concat(1===n?"up-vote":"down-vote"," post #").concat(t)),e.abrupt("return",{upvotes:r.up,downvotes:r.down,selfScore:r.our_score});case 15:y.a.showToast("You're attempting to vote on this post too quickly!","Failure");case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te.favorite=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ke.loggedIn()){e.next=2;break}return e.abrupt("return",ke.promptLogin("You must be logged in to favorite on posts!"));case 2:if(te.favoriting[t]){e.next=15;break}if(te.favoriting[t]=!0,!n){e.next=8;break}return e.abrupt("return",Object(O.d)(Object(v.jsx)("div",{className:"ClipboardModal",style:{minHeight:"22%"},children:Object(v.jsxs)("span",{children:["Due to an issue with e621's API, you are currently unable to unfavorite posts from this website.",Object(v.jsx)("br",{}),"Alternatively, you can click ",Object(v.jsx)("a",{href:"https://e621.net/posts/"+t,children:"this link"})," to unfavorite it on the vanilla site.",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),"I apologize for the incovenience, this issue will be fixed in a later update."]})})));case 8:return e.next=10,fetch(w.endpoint("favorites",{post_id:t}),{method:"POST"});case 10:return y.a.showToast("Favorited post #"+t),delete te.favoriting[t],e.abrupt("return",{favorited:!n});case 15:y.a.showToast("Failed to favorite! Please try again.","Failure");case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();n(51);var ne,se=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).currentPage=1,e.state={posts:[],fetch:!0,switchingPages:!1,order:""},e.docScrollEv=function(){document.getElementsByClassName("Footer")[0].getBoundingClientRect().bottom<=window.innerHeight&&e.state.posts.length>0&&e.loadPage(e.currentPage+1)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate(),n.instance=this,document.addEventListener("scroll",this.docScrollEv),D.get("post")&&this.openPostModalForId(D.get("post"))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.docScrollEv)}},{key:"openPostModalForId",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w.endpoint("posts/"+t));case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,r=s.post,Object(O.d)(Object(v.jsx)(q,Object(i.a)({},r)));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTags",value:function(){var e;return(this.props.tags?this.props.tags+" ":"")+M("search")+(ke.settings.blacklist||[]).map((function(e){return" -"+e.split(" ").join(" -")})).join(" ")+((null===(e=this.state.order)||void 0===e?void 0:e.length)?" ".concat(this.state.order):"")}},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=M("search"),n=parseInt(D.get("page"))||1,s=document.getElementsByClassName("SearchBar")[0],"page"===t&&(t=""),s&&(s.textContent=t,t.length>0&&s.parentElement.classList.add("Focused")),!(this.state.fetch||ne!==t&&ne)){e.next=35;break}return G.instance.setState({searching:!0}),ne=t,document.title="Searching...",this.currentPage=1,e.prev=10,this.currentPage=n,e.next=14,fetch(w.endpoint(this.props.endpoint||"posts",this.props.endpointArgs||{tags:this.getTags(),page:n}));case 14:return r=e.sent,e.next=17,r.json();case 17:if(e.t0=e.sent.posts,e.t0){e.next=20;break}e.t0=[];case 20:a=e.t0,this.setState({posts:a,fetch:!1}),G.instance.setState({searching:!1}),e.t1=this.props.endpoint,e.next="favorites"===e.t1?26:28;break;case 26:return document.title="Favorited | Sucralose!",e.abrupt("break",30);case 28:return document.title=t+" | Sucralose!",e.abrupt("break",30);case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(10),console.error(e.t2);case 35:case"end":return e.stop()}}),e,this,[[10,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s,r,a,c,i,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!(o.length>1&&void 0!==o[1])||o[1],this.setState({switchingPages:!0}),s=this.currentPage,r=this.currentPage+1;case 4:if(!(r<=t)){e.next=19;break}return this.currentPage=r,e.next=8,fetch(w.endpoint(this.props.endpoint||"posts",Object.assign(this.props.endpointArgs||{tags:this.getTags()},{page:r})));case 8:return a=e.sent,e.next=11,a.json();case 11:c=e.sent.posts,(i=this.state.posts)[n?"push":"unshift"].apply(i,Object(x.a)(c)),c.length>0&&(s=r),this.setState({posts:i,fetch:!1});case 16:r++,e.next=4;break;case 19:this.currentPage=s,this.setState({switchingPages:!1}),D.set("page",this.currentPage);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"PostList",children:[Object(x.a)(this.state.posts).filter((function(e){return e.file.url})).map((function(e){return Object(v.jsx)(te,Object(i.a)({},e),e.id)})),this.state.fetch||this.state.switchingPages?Object(v.jsx)("div",{className:"PostListFetchingOverlay",children:Object(v.jsx)(z,{})}):null]})}}]),n}(r.a.Component),re=(n(52),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={active:null},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setState({active:this.props.tabs[0]})}},{key:"render",value:function(){var e=this,t=r.a.Children.toArray(this.props.children);return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"TabsList",children:this.props.tabs.map((function(t){return Object(v.jsxs)("span",{className:"TabItem"+(t===e.state.active?" Active":""),onClick:function(){e.setState({active:t}),e.props.onChange&&e.props.onChange(t,e)},children:[Object(v.jsx)("span",{className:"TabItemTitle",children:t}),Object(v.jsx)("div",{className:"TabItemBorder"})]},t)}))}),t.find((function(t){return t.props.tab===e.state.active}))]})}}]),n}(r.a.Component)),ae=(n(53),n(54),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={comments:[]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.refresh()}),1e4),this.refresh()}},{key:"refresh",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s,r,a,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w.endpoint("posts/"+this.props.post.id+"/comments"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s=(new DOMParser).parseFromString(n.html,"text/html"),r=[],a=Object(g.a)(s.getElementsByClassName("comment"));try{for(a.s();!(c=a.n()).done;)i=c.value,o=i.getElementsByClassName("avatar")[0].children[0],r.push({id:i.attributes["data-comment-id"].nodeValue,user:i.attributes["data-creator-id"].nodeValue,username:(i.getElementsByClassName("user-member")[0]||{innerText:"Unknown User"}).innerText.trim(),body:i.getElementsByClassName("body styled-dtext")[0].innerHTML.trim(),avatar:n.posts[null===o?null:o.attributes["data-id"].nodeValue],timestamp:i.getElementsByTagName("time")[0].innerText})}catch(l){a.e(l)}finally{a.f()}this.setState({comments:r});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"Comments",children:this.state.comments.map((function(e){return Object(v.jsxs)("div",{className:"Comment",children:[null===e.avatar||null===e.avatar.preview_url?Object(v.jsx)("div",{className:"Avatar Placeholder"}):Object(v.jsx)(J,{href:"#/post/"+e.avatar.id,children:Object(v.jsx)("div",{className:"Avatar",style:{backgroundImage:B(e.avatar.preview_url)}})}),Object(v.jsxs)("div",{className:"Inner",children:[Object(v.jsx)(J,{href:"#/user/"+e.user,children:Object(v.jsx)("span",{className:"Username",children:e.username})}),Object(v.jsx)("span",{className:"Timestamp",children:e.timestamp}),Object(v.jsx)("div",{className:"Content",dangerouslySetInnerHTML:{__html:e.body}})]})]},e.id)}))})}}]),n}(r.a.Component)),ce=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"InfoItem",children:[Object(v.jsx)("span",{className:"ILabel",children:this.props.label}),null===this.props.content?null:Object(v.jsx)("span",{className:"IContent",children:this.props.content}),this.props.children]})}}]),n}(r.a.Component),ie=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={post:null,ready:!1,selfScore:0},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id=M("post"),document.title="#".concat(t," | Sucralose!"),e.prev=2,e.next=5,fetch(w.endpoint("posts/"+t));case 5:return n=e.sent,e.next=8,n.json();case 8:(s=e.sent.post)?this.setState({post:s,ready:!0}):this.setState({ready:!1}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),this.setState({ready:!0});case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.id!==M("post")&&(this.componentDidMount(),this.id=M("post"))}},{key:"formatSource",value:function(e){return e.split(/(http|https):\/\//)[2].replace("www.","").split(".")[0]}},{key:"vote",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,te.vote(this.state.post.id,t);case 3:e.t1=e.sent.selfScore,e.t2={selfScore:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"favorite",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.favorite(this.state.post.id,this.state.post.is_favorited);case 2:this.state.post.is_favorited=e.sent,this.forceUpdate();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.state.post,s=null===n?"Comments":"Comments (".concat(n.comment_count,")");if(n&&n.file)switch(n.file.ext){case"webm":e=Object(v.jsx)("video",{controls:!0,className:"Image Video",children:Object(v.jsx)("source",{src:n.file.url,type:"video/webm"})});break;default:e=Object(v.jsx)("div",{className:"Image",style:{backgroundImage:B(n.file.url)}})}return Object(v.jsx)("div",{className:"PostPage",children:this.state.ready&&n&&n.file&&n.file.url?Object(v.jsxs)("div",{children:[Object(v.jsx)(V.Wrapper,{menu:Object(v.jsx)(ee,Object(i.a)({},n)),children:e}),Object(v.jsxs)("div",{className:"PostButtonList",children:[Object(v.jsx)("div",{className:"Button",onClick:function(){return E(n.file.url)},children:"Download"}),Object(v.jsxs)("div",{className:"Votes",children:[Object(v.jsxs)("div",{className:"Button"+(this.state.selfScore>0?" Voted":""),onClick:function(){return t.vote(1)},children:["\ud83d\udd3c Upvote (",n.score.up,")"]}),Object(v.jsxs)("div",{className:"Button"+(this.state.selfScore<0?" Voted":""),onClick:function(){return t.vote(-1)},children:["\ud83d\udd3d Downvote (",-n.score.down,")"]}),Object(v.jsxs)("div",{className:"Button"+(n.is_favorited?" Voted":""),onClick:function(){return t.favorite()},children:["\ud83d\udc99 Favorite (",n.fav_count,")"]})]})]}),n.description&&n.description.trim().length>0?Object(v.jsx)("div",{className:"DescriptionContainer",children:Object(v.jsx)("div",{className:"Description",dangerouslySetInnerHTML:{__html:n.description.replace(/http(\S*)/gim,(function(e){return'<a href="'.concat(e,'">').concat(e,"</a>")})).split("\n").join("<br/>")}})}):null,Object(v.jsxs)(re,{tabs:["Tags",s,"Info"],children:[Object(v.jsx)(Q,{tab:"Tags",tags:n.tags}),Object(v.jsx)(ae,{tab:s,post:n}),Object(v.jsxs)("div",{tab:"Info",className:"InfoTab",children:[Object(v.jsx)(ce,{label:"Post ID: ",content:"#"+n.id}),Object(v.jsx)(ce,{label:"Post MD5: ",content:n.file.md5}),Object(v.jsx)(ce,{label:"Created at: ",content:new Date(n.created_at).toLocaleDateString()+", "+new Date(n.created_at).toLocaleTimeString()}),Object(v.jsx)(ce,{label:"Size: ",content:P(n.file.size)}),Object(v.jsx)(ce,{label:"Width: ",content:n.file.width+" pixels"}),Object(v.jsx)(ce,{label:"Height: ",content:n.file.height+" pixels"}),Object(v.jsx)(ce,{label:"File extension: ",content:n.file.ext.toUpperCase()}),Object(v.jsx)(ce,{label:"Flags: ",content:Object.values(n.flags).filter((function(e){return e})).length>0?Object.keys(n.flags).filter((function(e){return n.flags[e]})).join(", "):"none"}),Object(v.jsx)(ce,{label:"Rating: ",content:"e"===n.rating?"explicit":"q"===n.rating?"questionable":"safe"}),Object(v.jsx)(ce,{label:"Sources: ",children:Object(v.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:n.sources.map((function(e){return Object(v.jsx)("a",{href:e,style:{textTransform:"capitalize"},children:t.formatSource(e)},e)}))})}),Object(v.jsxs)(ce,{label:"Uploader: ",children:[" ",Object(v.jsx)("a",{href:"#/user/"+n.uploader_id,children:n.uploader_id})," "]})]})]})]}):null})}}]),n}(r.a.Component),oe=(n(55),n(25)),le=n.n(oe),ue=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={items:[],localUserId:"pending"},e.addFieldRef=Object(s.createRef)(),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setState({items:this.props.items})}},{key:"componentDidUpdate",value:function(){this.props.onChange&&this.props.onChange(this.state.items)}},{key:"add",value:function(){if(null!==this.addFieldRef.current&&0!==this.addFieldRef.current.value.trim().length){var e=Object(x.a)(this.state.items);if(this.props.split){var t,n=Object(g.a)(this.addFieldRef.current.value.split(" "));try{for(n.s();!(t=n.n()).done;){var s=t.value;!e.includes(s)&&s&&e.push(s)}}catch(r){n.e(r)}finally{n.f()}}else!e.includes(this.addFieldRef.current.value)&&this.addFieldRef.current.value&&e.push(this.addFieldRef.current.value);this.addFieldRef.current.value="",this.setState({items:e})}}},{key:"remove",value:function(e){var t=Object(x.a)(this.state.items);t.splice(e,1),this.setState({items:t})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"SList",children:[Object(v.jsxs)("div",{className:"SListTitle",children:[this.props.title,this.props.note?Object(v.jsx)("div",{className:"SListNote",children:this.props.note}):null]}),Object(v.jsx)("div",{className:"SListItems TagsList",children:null===this.state.items||0===this.state.items.length?Object(v.jsx)("div",{className:"SListPlaceholder",children:"No items found."}):this.state.items.map((function(t){return Object(v.jsx)("div",{className:"SListItem",children:Object(v.jsxs)("div",{className:"Entry",children:[t,Object(v.jsx)(W.a,{icon:Z.p,className:"XButton",onClick:e.remove.bind(e,e.state.items.indexOf(t))})]})},e.state.items.indexOf(t))}))}),Object(v.jsxs)("div",{className:"SListControls",children:[Object(v.jsx)("input",{ref:this.addFieldRef,onKeyDown:function(t){"Enter"===t.key&&e.add()},className:"SListControl",placeholder:this.props.placeholder}),Object(v.jsx)("div",{className:"SListControl",onClick:function(){return e.add()},children:"Add"})]})]})}}]),n}(r.a.Component),de=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"SettingsPage",children:[Object(v.jsx)("div",{className:"SHeader",children:"e621 Settings"}),Object(v.jsx)("div",{className:"SItems",children:Object(v.jsx)("div",{style:{textAlign:"center",fontSize:"1.5rem",opacity:.5},children:"Currently unavailable."})}),Object(v.jsx)("div",{className:"SHeader",children:"Sucralose Settings"}),Object(v.jsx)("div",{className:"SItems",children:Object.keys(n.props).map((function(e){return Object(v.jsxs)("div",{className:"SList",children:[Object(v.jsx)("div",{className:"SListTitle",children:S(e)}),Object(v.jsx)("div",{className:"SListItems",children:Object.entries(n.props[e]).map((function(t){var s=Object(o.a)(t,2),r=s[0],a=s[1];return Object(v.jsx)(pe,{name:r,setting:a,callback:function(t){return n.props[e][r].value=t,n.save()}},r)}))})]},e)}))}),Object(v.jsxs)("div",{className:"SItems",children:[Object(v.jsx)(ue,{title:"Subscribed Tag Sets",items:ke.settings.subscriptions,placeholder:"Examples: some_artist | braeburned | rating:e score:>100",onChange:function(e){ke.settings.subscriptions=e,ke.saveSettings()},note:"NOTE: Due to e621 API limitations, multi-tag subscriptions will not be displayed on your home page. Example: 'rating:s score>100'"}),Object(v.jsx)(ue,{split:!0,title:"Blacklisted Tag Sets",items:ke.settings.blacklist,placeholder:"Examples: intersex | score:<0 | rating:e rating:q",onChange:function(e){ke.settings.blacklist=e,ke.saveSettings()}})]}),Object(v.jsxs)("div",{className:"SSerializers",children:[Object(v.jsx)("div",{className:"Button",onClick:function(){return ke.importSettings()},children:"Import Settings"}),Object(v.jsx)("div",{className:"Button",onClick:function(){return ke.exportSettings()},children:"Export Settings"})]})]})}}],[{key:"save",value:function(){var e,t={};for(var n in this.defaults)for(var s in this.defaults[n])le.a.set(t,[n,s,"value"].join("."),this.props[n][s].value);N("settings");I("settingsProps",t),null===(e=he.forceUpdate)||void 0===e||e.call(he)}}]),n}(r.a.Component);function pe(e){var t=e.name,n=e.setting,s=e.callback,a=r.a.useState(n.value),c=Object(o.a)(a,2),i=c[0],l=c[1],u=function(e){return null===s||void 0===s||s(e),l(e)};switch(n.type){default:return null;case"color":return Object(v.jsxs)("div",{className:"SListItem",children:[Object(v.jsx)("div",{className:"EntryTitle",children:S(t)}),Object(v.jsx)("span",{className:"ColorPreview",style:{backgroundColor:i}}),Object(v.jsx)("input",{className:"Entry ColorField",defaultValue:i,onInput:function(e){return u(e.currentTarget.value)}})]});case"slider":return Object(v.jsxs)("div",{className:"SListItem",children:[Object(v.jsxs)("div",{className:"EntryTitle",children:[S(t)," - ",i]}),Object(v.jsx)("input",{className:"Entry SliderField",defaultValue:i,type:"range",onInput:function(e){return u(e.currentTarget.value)},min:n.min,max:n.max})]})}}function he(){var e=r.a.useReducer((function(e){return e+1}),0),t=Object(o.a)(e,2)[1];he.forceUpdate=t;var n=de.props;return Object(v.jsx)("style",{children:"\n\t\t\t:root {\n\t\t\t\t--primary-color: ".concat(n.colors.primary.value,";\n\t\t\t\t--secondary-color: ").concat(n.colors.secondary.value,";\n\t\t\t\t\n\t\t\t\t--primary-bg: ").concat(n.backgroundColors.primary.value,";\n\t\t\t\t--secondary-bg: ").concat(n.backgroundColors.secondary.value,";\n\t\t\t\t--tertiary-bg: ").concat(n.backgroundColors.tertiary.value,";\n\t\t\t\t\n\t\t\t\t--primary-border-radius: ").concat(n.borderRadius.primary.value,"px;\n\t\t\t\t--secondary-border-radius: ").concat(n.borderRadius.secondary.value,"px;\n\t\t\t\t\n\t\t\t\t--post-column-count: ").concat(n.posts.columnCount.value,";\n\t\t\t\t--mobile-post-column-count: ").concat(n.posts.mobileColumnCount.value,";\n\t\t\t}\n\t\t")})}de.defaults={colors:{primary:{type:"color",value:"#8fbcbb"},secondary:{type:"color",value:"#88c0d0"}},backgroundColors:{primary:{type:"color",value:"#2e3440"},secondary:{type:"color",value:"#3b4252"},tertiary:{type:"color",value:"#434c5e"}},borderRadius:{primary:{type:"slider",min:0,max:50,value:4},secondary:{type:"slider",min:0,max:50,value:7}},posts:{columnCount:{type:"slider",min:1,max:15,value:7},mobileColumnCount:{type:"slider",min:1,max:7,value:2}}},de.props=le.a.merge(de.defaults,N("settingsProps"));n(57);var je=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"SetsPage"})}}]),n}(r.a.Component),be=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){if(!e.props.multiline&&"Enter"===t.key)return t.preventDefault()},e.handleInput=function(t){if(e.props.owner[e.props.id]=t.target.textContent,e.props.callback&&e.props.callback(t))return t.preventDefault()},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"Field",children:[Object(v.jsx)("div",{className:"FTitle",children:this.props.title}),this.props.note?Object(v.jsx)("div",{className:"FNote",children:this.props.note}):null,this.props.importantNote?Object(v.jsx)("div",{className:"FNote Important",children:this.props.importantNote}):null,Object(v.jsx)("div",{id:"err-note-"+this.props.id,className:"FNote Error"}),Object(v.jsx)("div",{contentEditable:!0,className:"Input",style:this.props.multiline?{height:300}:null,onKeyDown:this.handleKeyDown,onInput:this.handleInput})]})}}]),n}(r.a.Component);je.CreatePage=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).name="",e.shortname="",e.description="",e.public=!1,e.transferOnDelete=!1,e}return Object(h.a)(n,[{key:"post",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(g.a)(document.getElementsByClassName("Error"));try{for(t.s();!(n=t.n()).done;)n.value.innerHTML=""}catch(i){t.e(i)}finally{t.f()}return e.prev=2,e.next=5,fetch(w.endpoint("post_sets",{"post_set[name]":this.name.split(" ").join("+"),"post_set[shortname]":this.shortname,"post_set[description]":this.description,"post_set[is_public]":this.public?1:0,"post_set[transfer_on_delete]":this.transferOnDelete?1:0,commit:"Create"}),{method:"POST"});case 5:return s=e.sent,e.next=8,s.json();case 8:if(r=e.sent,console.log(r),r.errors)for(a in r.errors)(c=document.getElementById("err-note-"+a))&&r.errors[a]&&(c.innerHTML=r.errors[a].map((function(e){return"ERROR: "+e})).join("<br/>"));else ke.postSets.push(r),window.location.assign("#/set/"+r.id);e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{className:"SetsPage CreatePage",children:Object(v.jsxs)("div",{className:"Fields",children:[Object(v.jsx)(be,{owner:this,id:"name",title:"Display Name",note:"Must be unique. There can only be one of each name."}),Object(v.jsx)(be,{owner:this,id:"shortname",title:"ID/Short Name",note:"This is the set's metatag name. This will be used to find your set.",importantNote:"NOTE: Can only contain letters, numbers, and underscores and must contain at least one letter or underscore."}),Object(v.jsx)(be,{owner:this,id:"description",multiline:!0,title:"Description"}),Object(v.jsx)("div",{className:"Button",onClick:function(){return e.post()},children:"Create Set"})]})})}}]),n}(r.a.Component);var fe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id;e.creator_id;return Object(v.jsxs)(V,{children:[Object(v.jsx)(J,{href:"#/search/set:"+t,children:Object(v.jsx)(V.Item,{children:"View Posts"})}),Object(v.jsx)(V.Divider,{}),Object(v.jsx)($,{tag:"set:"+t})]})}}]),n}(r.a.Component),ve=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.name,s=e.shortname,r=e.creator_id,a=e.description,c=e.updated_at,o=e.post_count;return Object(v.jsx)(V.Wrapper,{menu:Object(v.jsx)(fe,Object(i.a)({},this.props)),children:Object(v.jsx)(J,{href:"#/search/set:"+t,children:Object(v.jsxs)("div",{className:"SetItem",children:[Object(v.jsxs)("div",{className:"STitle",children:[n,",",Object(v.jsx)(J,{href:"#/user/"+r,children:Object(v.jsxs)("span",{className:"SCreator",children:["created by ",r]})}),Object(v.jsxs)("span",{className:"SDate",children:["Updated at ",new Date(c).toDateString(),", ",new Date(c).toLocaleTimeString()]})]}),Object(v.jsx)("div",{className:"SNote",children:s}),Object(v.jsxs)("div",{className:"SNote",children:[o," posts"]}),a?Object(v.jsx)("div",{className:"SDesc",children:a}):null]})})})}}]),n}(r.a.Component);je.MainPage=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).page=1,e.lastValidPage=e.page,e.state={items:[],mySets:[],subscribedSets:[]},e.docScrollEv=function(){document.getElementsByClassName("Footer")[0].getBoundingClientRect().bottom<=window.innerHeight&&e.state.items.length>0&&e.loadPage(e.page+1)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.docScrollEv),document.title="Post Sets | Sucralose!",this.initSets(),this.initMySets(),je.MainPage.instance=this}},{key:"initSets",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w.endpoint("post_sets"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({items:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initMySets",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.fetchLocalUserId();case 2:return t=e.sent,e.next=5,fetch(w.endpoint("post_sets",{"search[creator_id]":t}));case 5:return n=e.sent,e.next=8,n.json();case 8:s=e.sent,this.setState({mySets:s});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initSubscribedSets",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s,r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ke.settings.subscriptions.filter((function(e){return e.includes("set:")})).map((function(e){return/set:([0-9]*)/.exec(e)[1]})).filter((function(e){return e&&e.trim()})),n=[],s=Object(g.a)(t),e.prev=3,s.s();case 5:if((r=s.n()).done){e.next=17;break}return a=r.value,e.next=9,fetch(w.endpoint("post_sets/"+a));case 9:return c=e.sent,e.next=12,c.json();case 12:i=e.sent,n.push(i),this.setState({subscribedSets:n});case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),s.e(e.t0);case 22:return e.prev=22,s.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[3,19,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.docScrollEv)}},{key:"loadPage",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s,r,a,c,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!(i.length>1&&void 0!==i[1])||i[1],s=this.page+1;case 2:if(!(s<=t)){e.next=16;break}return this.page=s,e.next=6,fetch(w.endpoint("post_sets",{page:s}));case 6:return r=e.sent,e.next=9,r.json();case 9:a=e.sent,(c=this.state.items)[n?"push":"unshift"].apply(c,Object(x.a)(a)),c.length>0&&(this.lastValidPage=s,this.setState({items:c}),document.title="Post Sets Page ".concat(s," | Sucralose!"));case 13:s++,e.next=2;break;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{className:"SetsPage MainPage",children:Object(v.jsxs)(re,{tabs:["All Sets","My Sets","Subscribed Sets"],onChange:function(t){"Subscribed Sets"!==t||e.state.subscribedSets.length||e.initSubscribedSets()},children:[Object(v.jsx)("div",{tab:"All Sets",children:this.state.items.map((function(e){return Object(v.jsx)(ve,Object(i.a)({},e),e.id)}))}),Object(v.jsx)("div",{tab:"My Sets",children:this.state.mySets.map((function(e){return Object(v.jsx)(ve,Object(i.a)({},e),e.id)}))}),Object(v.jsx)("div",{tab:"Subscribed Sets",children:this.state.subscribedSets.map((function(e){return Object(v.jsx)(ve,Object(i.a)({},e),e.id)}))})]})})}}]),n}(r.a.Component);n(58);var me=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={name:"",avatar:null,favCount:0,postCount:0,about:null},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s,r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w.endpoint("users/"+M("user"),{},!0));case 2:return t=e.sent,e.t0=new DOMParser,e.next=6,t.text();case 6:return e.t1=e.sent,n=e.t0.parseFromString.call(e.t0,e.t1,"text/html"),s=n.getElementsByClassName("user-member")[0].textContent,e.next=11,this.parseAvatar(n.getElementsByClassName("profile-avatar")[0]);case 11:r=e.sent,a=Object(x.a)(n.getElementsByTagName("a")).find((function(e){return e.href.includes("/favorites")})).textContent,c=Object(x.a)(n.getElementsByClassName("user-statistics")[0].getElementsByTagName("a")).find((function(e){return e.href.includes("/posts")})).textContent,i=this.parseAboutInfo(n.getElementsByClassName("about-section")[0]),this.setState({name:s,avatar:r,favCount:a,postCount:c,about:i});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseAvatar",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.firstElementChild){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,fetch(w.endpoint("posts/"+t.firstElementChild.dataset.id));case 5:return n=e.sent,e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"parseAboutInfo",value:function(e){if(e){var t=e.getElementsByClassName("content"),n=Object(o.a)(t,1)[0];return n&&n.firstElementChild?n.firstElementChild.textContent:void 0}}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.avatar,s=e.favCount,r=e.postCount,a=e.about,c="Favorites (".concat(s,")"),o="Posts (".concat(r,")");return Object(v.jsxs)("div",{className:"UserPage",children:[Object(v.jsxs)("div",{className:"Head",children:[Object(v.jsx)("div",{className:"AvatarContainer",children:n&&n.post?Object(v.jsx)(te,Object(i.a)({},n.post)):null}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"Username",children:t}),Object(v.jsx)("div",{className:"About",children:a||""})]})]}),Object(v.jsxs)(re,{tabs:["Info",c,o],children:[Object(v.jsx)(se,{tab:c,endpoint:"favorites",endpointArgs:{user_id:M("user")}}),Object(v.jsx)(se,{tab:o,tags:"user:"+t.replace(/ /g,"_")})]}),t?null:Object(v.jsx)("div",{className:"PostListFetchingOverlay",children:Object(v.jsx)("img",{src:Y,className:"Spinner"})})]})}}]),n}(r.a.Component),Oe=n.p+"static/media/Sidebar.e8db7520.svg",xe=function(){function e(){Object(p.a)(this,e),this.listeners={},this.options={}}return Object(h.a)(e,[{key:"subscribe",value:function(e,t,n){if(this.listeners[e]||(this.listeners[e]=[]),~this.listeners[e].indexOf(t))return console.error('Cannot subscribe to event "'.concat(e,'"! Already subscribed.'),t);this.listeners[e].push(t),n&&(this.options[t]=n)}},{key:"unsubscribe",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]);var n=this.listeners[e].indexOf(t);this.options[t]&&delete this.options[t],~n?this.listeners[e].splice(n,1):console.warn('Cannot unsubscribe to event "'.concat(e,'"! Not subscribed.'),t)}},{key:"getOptionsFor",value:function(e){return Object.assign({priority:0},this.options[e]||{})}},{key:"invoke",value:function(e){for(var t=this,n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].sort((function(e,n){return t.getOptionsFor(e).priority-t.getOptionsFor(n)})).every((function(t){try{if(!0===t.apply(void 0,s))return!1}catch(n){console.error('Event listener failed to invoke "'.concat(e,'"!'),t,n)}return!0}))}}]),e}(),ge=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){n.instance=this}},{key:"toggle",value:function(){this.setState({open:!this.state.open}),this.state.open?n.buttonRef.current.classList.remove("Open"):n.buttonRef.current.classList.add("Open")}},{key:"SidebarButton",value:function(e){var t=e.href,n=e.icon,s=e.children,r=e.onClick;return Object(v.jsx)(J,{href:t,onClick:r,children:Object(v.jsxs)("div",{className:"SidebarButton",children:[Object(v.jsx)(W.a,{icon:n,className:"Icon"}),s]})})}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{className:"SidebarContainer"+(this.state.open?" Open":""),onClick:function(t){t.target===t.currentTarget&&e.toggle()},children:Object(v.jsxs)("div",{className:"Sidebar",children:[Object(v.jsx)(this.SidebarButton,{href:"".concat(L(),"/#/search/"),onClick:function(){return ke.forceUpdate()},icon:Z.l,children:"Recent Posts"}),Object(v.jsx)(this.SidebarButton,{href:"".concat(L(),"/#/search/order:rank/"),icon:Z.d,onClick:function(){return ke.forceUpdate()},children:"Hot Posts"}),Object(v.jsx)(this.SidebarButton,{href:"".concat(L(),"/#/"),icon:Z.a,children:"Subscriptions"}),Object(v.jsx)(this.SidebarButton,{href:"".concat(L(),"/#/favorites/"),icon:Z.k,children:"Favorites"}),Object(v.jsx)(this.SidebarButton,{href:"".concat(L(),"/#/sets/"),icon:Z.n,children:"Sets"}),Object(v.jsx)(this.SidebarButton,{onClick:function(){return y.a.showToast("Not yet added!","Failure")},icon:Z.q,children:"Account"})," ",Object(v.jsx)(this.SidebarButton,{href:"".concat(L(),"/#/settings/"),icon:Z.h,children:"Settings"})]})})}}]),n}(r.a.Component);ge.buttonRef=Object(s.createRef)(),window.search=function(e){window.location.assign("#/search/"+encodeURIComponent(e)),se.instance&&se.instance.setState({fetch:!0}),ke.forceUpdate()};var ye=window.location.hash;function ke(){var e=Object(f.useMediaQuery)({query:"(max-width: 1224px)"}),t=localStorage.getItem("username"),n=localStorage.getItem("apiKey");function a(){return c.apply(this,arguments)}function c(){return(c=Object(d.a)(u.a.mark((function e(){var s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",ke.showNotice("Your username must not be empty!"));case 2:if(n){e.next=4;break}return e.abrupt("return",ke.showNotice("Your API key must not be empty!"));case 4:return e.prev=4,s={login:t,api_key:n},e.next=8,fetch(w.endpoint("posts",Object(i.a)({limit:0},s)));case 8:return r=e.sent,e.next=11,r.json();case 11:if(!1!==e.sent.success){e.next=14;break}return e.abrupt("return",ke.showNotice("Failed to login! Please try again.\nNote: Your API key is not your password!"));case 14:w.login=s,localStorage.setItem("username",t),localStorage.setItem("apiKey",n),window.location.reload(),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),ke.showNotice("There was an error logging in, check your credentials and try again! Note: Your API key is not your password!"),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}ke.showNotice=function(e){Object(O.d)(Object(v.jsx)("div",{className:"ClipboardModal",onClick:function(){return Object(O.b)()},children:Object(v.jsx)("span",{children:e})}))},ke.promptLogin=function(e){Object(O.d)(Object(v.jsx)("div",{className:"LoginModalContainer",children:Object(v.jsxs)("div",{className:"LoginModal",children:[Object(v.jsxs)("div",{className:"Label",children:[e,Object(v.jsx)("br",{}),"In order to login, you will need your username and your ",Object(v.jsx)("span",{className:"Link",children:"API key"}),"."]}),Object(v.jsx)("input",{className:"Field",placeholder:"Username",onChange:function(e){return t=e.target.value}}),Object(v.jsx)("input",{className:"Field",placeholder:"API key",onChange:function(e){return n=e.target.value}}),Object(v.jsxs)("div",{className:"Buttons",children:[Object(v.jsx)("div",{className:"Button",onClick:function(){return a()},children:"Login"}),Object(v.jsx)("div",{className:"Button",onClick:function(){return Object(O.b)()},children:"Cancel"})]})]})}))},Object(s.useEffect)((function(){t&&n||setTimeout((function(){null===localStorage.getItem("api_key")&&Object(O.d)(Object(v.jsx)("div",{className:"LoginModalContainer",children:Object(v.jsxs)("div",{className:"LoginModal",children:[Object(v.jsxs)("div",{className:"Label",children:["It appears you're not logged in, if you would like to login, you will need your username and your ",Object(v.jsx)("span",{className:"Link",children:"API key"}),"."]}),Object(v.jsx)("input",{className:"Field",placeholder:"Username",onChange:function(e){return t=e.target.value}}),Object(v.jsx)("input",{className:"Field",placeholder:"API key",onChange:function(e){return n=e.target.value}}),Object(v.jsxs)("div",{className:"Buttons",children:[Object(v.jsx)("div",{className:"Button",onClick:function(){return a()},children:"Login"}),Object(v.jsx)("div",{className:"Button",onClick:function(){return Object(O.b)()},children:"Not Now"}),Object(v.jsx)("div",{className:"Button",onClick:function(){return localStorage.setItem("api_key","")},children:"Never Show Again"})]})]})}))}),1e3)}));var l=r.a.useReducer((function(e){return e+1}),0),p=Object(o.a)(l,2)[1];ke.forceUpdate=p,ke.settings=N("settings",{subscriptions:[],blacklist:[]}),ke.saveSettings=function(){return I("settings",ke.settings)},ke.importSettings=function(){var e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",(function(){var t=e.files;t[0]&&new Response(t[0]).json().then((function(e){for(var t in localStorage.clear(),e)localStorage[t]=e[t];window.location.reload()})).catch((function(){return ke.showNotice("Error importing file!")}))})),document.body.appendChild(e),e.click()},ke.exportSettings=function(){var e=URL.createObjectURL(new Blob([JSON.stringify(localStorage,null,"\t")],{type:"json"})),t=document.createElement("a");t.href=e,t.download="sucraloseSettings.json",document.body.appendChild(t),t.click(),setTimeout((function(){document.body.removeChild(t),window.URL.revokeObjectURL(e)}),0)},ke.loggedIn=function(){return w.login&&w.login.login&&w.login.api_key},ke.init||(ke.init=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke.loggedIn()){e.next=7;break}return e.next=3,w.fetchLocalUserId();case 3:if(ke.localUserId=e.sent,ke.localUserId){e.next=6;break}return e.abrupt("return");case 6:(ke.init.postSets=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w.endpoint("post_sets",{"search[creator_id]":ke.localUserId}));case 2:return t=e.sent,e.next=5,t.json();case 5:ke.postSets=e.sent;case 6:case"end":return e.stop()}}),e)}))))();case 7:case"end":return e.stop()}}),e)}))))();var h,j=function(){return Object(v.jsx)(se,{tags:ke.settings.subscriptions?ke.settings.subscriptions.filter((function(e){return 1===e.split(" ").length})).map((function(e){return"~"+e})).join(" "):null})},b=function(){return Object(v.jsx)(se,{})},x=function(){return Object(v.jsx)(se,{endpoint:"favorites",endpointArgs:{}})};switch(window.location.hash.split("/")[1]){default:h=Object(v.jsx)(j,{});break;case"search":h=Object(v.jsx)(b,{});break;case"favorites":h=Object(v.jsx)(x,{});break;case"sets":h="create"===window.location.hash.split("/")[2]?Object(v.jsx)(je.CreatePage,{}):Object(v.jsx)(je.MainPage,{});break;case"post":h=Object(v.jsx)(ie,{});break;case"user":h=Object(v.jsx)(me,{});break;case"settings":h=Object(v.jsx)(de,{})}return Object(v.jsxs)("div",{className:"App "+(e?"Mobile":"Desktop"),children:[Object(v.jsx)(ge,{}),Object(v.jsxs)("div",{children:[Object(v.jsxs)("header",{className:"Header",children:[Object(v.jsx)("img",{className:"SidebarIcon",src:Oe,ref:ge.buttonRef,onClick:function(){return ge.instance.toggle()},alt:"Sidebar"}),Object(v.jsx)("span",{className:"HeaderMain",children:"Sucralose!"}),Object(v.jsx)(G,{children:Object(v.jsx)(m,{value:0,items:Object.keys(T).map((function(e){return{key:e,value:T[e],label:"Order: "+e}})),callback:function(e){se.instance&&se.instance.setState({order:e.state.value,fetch:se.instance.state.order!==e.state.value})}})})]}),Object(v.jsx)("div",{className:"Main",children:h}),Object(v.jsxs)("footer",{className:"Footer",children:[Object(v.jsxs)("span",{children:["Default Theme, ",Object(v.jsx)("a",{href:"https://www.nordtheme.com/",children:"Nord"})]}),Object(v.jsx)("div",{className:"Divider"}),Object(v.jsxs)("span",{children:["\xa9 Copyright 2020-",(new Date).getFullYear()," Metalloriff"]})]})]}),Object(v.jsx)(O.a,{}),Object(v.jsx)(y.a,{}),Object(v.jsx)(V.Handler,{}),Object(v.jsx)(he,{})]})}window.events=new xe,window.onpopstate=function(e){return window.events.invoke("popstate",e)},window.events.subscribe("popstate",function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ye.split("?")[0],(ye=window.location.hash.split("?")[0]).split("/")[1]===r.split("/")[1]){e.next=4;break}return e.abrupt("return",ke.forceUpdate());case 4:if(!(null===(a=M("post"))||void 0===a?void 0:a.length)||q.current&&(null===(n=q.current.state)||void 0===n||null===(s=n.post)||void 0===s?void 0:s.id)===a){e.next=7;break}return e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(ke,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[59,1,2]]]);
//# sourceMappingURL=main.98a6e715.chunk.js.map